<form [formGroup]="taskPropertyForm" #userForm="ngForm" (submit)="save()">
    <!-- <perfect-scrollbar [config]="config" style="height: 100%;"> -->
    <!-- <mat-card> -->
    <div fxLayout="row" fxLayoutAlign="space-between center">
        <!-- <mat-card-title> -->
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'START_TASK'">{{'Start Task' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'USER_TASK'">{{'User Task' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'EMAIL_TASK'">{{'Email Task' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'DECISION_TASK'">{{'Decision Task' |
            translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'DELAY_TIMER'">{{'Delay Timer' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'DB_TASK'">{{'DB Task' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'APPROVAL_TASK'">{{'Approval Task' |
            translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'COMPUTE_TASK'">{{'Compute Task' |
            translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'WEB_SERVICE_TASK'">{{'Web Service Task' |
            translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'CALL_ANOTHER_WORKFLOW'">{{'Call Another Workflow'
            | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'DECISION_TABLE'">{{'Decision Table' |
            translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'SMS_TASK'">{{'SMS Task' | translate}}</span>
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'COUNTER_TASK'">{{'Counter Task' |
            translate}}</span>
        <!-- <span class="fs_14 font-weight-bold" *ngIf="taskType === 'EXCEL_REPORT'">Excel Report</span> -->
        <span class="fs_14 font-weight-bold" *ngIf="taskType === 'SYSTEM_TASK'">{{'System Notification' |
            translate}}</span>
        <!-- </mat-card-title> -->
        <div *ngIf="taskType === 'COMPUTE_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'WEB_SERVICE_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'DB_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'EMAIL_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'DECISION_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'DECISION_TABLE'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'SMS_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <div *ngIf="taskType === 'COUNTER_TASK'">
            <mat-slide-toggle id="restartable" formControlName="restartable">{{'Restartable' | translate}}
            </mat-slide-toggle>
        </div>
        <!-- <div *ngIf="taskType === 'EXCEL_REPORT'">
                <mat-slide-toggle id="restartable" formControlName="restartable">Restartable</mat-slide-toggle>
            </div> -->
    </div>
    <ng-container *ngIf="taskType === 'START_TASK'">
        <div fxLayout="row" fxLayoutGap="10px">
            <div fxLayout="column" fxLayoutGap="10px" style="width:33%">
                <mat-form-field>
                    <input matInput id="starttask_name" placeholder="{{'Name' | translate}}" formControlName="name"
                        required>
                    <mat-error>{{'Name is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="column" fxLayoutGap="10px" style="width:33%;">
                <!-- <mat-form-field>
                        <input type="text" placeholder="Assignee User" formControlName="assigneeUser" matInput
                            [matAutocomplete]="auto">
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option value="user1">User</mat-option>
                            <mat-option value="user2">User</mat-option>
                        </mat-autocomplete>
                        <mat-error>Assignee User is required</mat-error>
                    </mat-form-field> -->

                <p style="margin-top: -10px;">{{'Select User' | translate}}</p>
                <div class="flag-container-css" style="margin-top: -8px;" *ngIf="assignUsersList.length === 0"
                    (click)="openTaskOwnerDialog()">
                    <mat-icon appearance="filled" class="flag-css" id="person_icon"
                        matTooltip="{{'Select User' | translate}}"> person
                    </mat-icon>
                    <mat-icon class="circle-css">add_circle</mat-icon>
                </div>
                <div *ngIf="assignUsersList.length > 0">
                    <div class="row w-100 mx-0" style="margin-top: -8px;">
                        <div *ngFor="let user of assignUsersList;let i = index;">
                            <div *ngIf="i<=3" (click)="openTaskOwnerDialog()"
                                style="width: 30px; height: 30px; line-height: 30px; border-radius: 50%;text-align: center; padding: 0px;cursor: pointer;"
                                class="hover-class" [style.margin-left]="i>0?'-8px':''"
                                [matTooltip]="user?.firstName + ' ' + user?.lastName"
                                [style.background]="assigneeUserColorArray[i]">
                                <span
                                    style="font-size: 12px; color: white;font-weight: 100;">{{setUserProfilename(user)}}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- <mat-form-field>
                        <mat-label>Start task using</mat-label>
                        <mat-select formControlName="propertyType" (selectionChange)="launch($event)">
                            <mat-option value="manual">Manually</mat-option>
                            <mat-option value="launch">Webservice call</mat-option>
                        </mat-select>
                        <mat-error>Start task Type is required</mat-error>
                    </mat-form-field> -->
            </div>
            <div fxLayout="column" fxLayoutGap="10px" style="width:33%">
                <p style="margin-top: -10px;">{{'Select Team' | translate}}</p>
                <div class="flag-container-css" *ngIf="teamList.length === 0" style="margin-top: -8px;"
                    (click)="openTeamsDialog()">
                    <mat-icon appearance="filled" class="flag-css" id="person_icon"
                        matTooltip="{{'Select Team' | translate}}"> person
                    </mat-icon>
                    <mat-icon class="circle-css">add_circle</mat-icon>
                </div>

                <div *ngIf="teamList.length > 0">
                    <div class="row w-100 mx-0" style="margin-top: -8px;">
                        <div *ngFor="let user of teamList;let i = index;">
                            <div *ngIf="i<=3" (click)="openTeamsDialog()"
                                style="width: 30px; height: 30px; line-height: 30px; border-radius: 50%;text-align: center; padding: 0px;cursor: pointer;"
                                class="hover-class" [style.margin-left]="i>0?'-8px':''" [matTooltip]="user?.name"
                                [style.background]="assigneeUserColorArray[i]">
                                <span
                                    style="font-size: 12px; color: white;font-weight: 100;">{{getUserFirstAndLastNamePrefix(user?.name)}}</span>
                            </div>
                            <ng-container *ngIf="i===4" (click)="openTeamsDialog()">
                                <div style=" width: 30px; height: 30px; line-height: 30px; border-radius: 50%;  background-color: rgb(192, 192, 192); text-align: center; padding: 0px;cursor: pointer; margin-left:-8px;"
                                    class="hover-class">
                                    <span
                                        style="font-size: 12px; color: grey;font-weight: 100;">+{{getRemainingAssigneeUserCount(user?.name)}}</span>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div fxLayout="row">
            <div fxLayout="column" style="margin-top: 1%;">
                <mat-label>{{'Start task using' | translate}} :</mat-label>
            </div>
            <div fxLayout="column" style="margin-top: 1%;">
                <mat-radio-group id="propertyType" aria-label="Select an option" formControlName="propertyType">
                    <mat-radio-button value="manual" id="manual" (change)="radioChange($event)"
                        style="margin-left:7px;">
                        {{'Manually' | translate}}</mat-radio-button>
                    <mat-radio-button *ngIf="isWebServiceAllowed" value="launch" id="launch"
                        (change)="radioChange($event)" style="margin-left:7px;">
                        {{'Webservice call' | translate}}</mat-radio-button>
                    <mat-radio-button *ngIf="isScheduleAllowed" value="scheduled" id="scheduled"
                        (change)="radioChange($event)" style="margin-left:7px;">
                        {{'Scheduled' | translate}}</mat-radio-button>
                </mat-radio-group>
            </div>
        </div>
        <div fxLayout="row" *ngIf="taskPropertyForm.get('propertyType').value === 'manual'" style="margin-top: 2%;">
            <mat-slide-toggle id="publicForm" formControlName="publicForm" (change)="publicForm($event)">Enable
                {{'Public Form' | translate}}
            </mat-slide-toggle>
        </div>
        <ng-container *ngIf="taskPropertyForm.get('propertyType').value === 'manual'">
            <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 3%;">
                <mat-form-field style="width:50%">
                    <input matInput id="formIdentifier" placeholder="{{'Form Identifier' | translate}}*"
                        formControlName="formIdentifier" readonly="true">
                    <mat-error>{{'Form identifier is required' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field style="width:15%" *ngIf="isCustomPage===false">
                    <input matInput id="formVersion" placeholder="{{'Form Version' | translate}}"
                        formControlName="formVersion" readonly="true">
                </mat-form-field>
                <div style="padding-top: .5%;width:33%">
                    <mat-button-toggle-group id="selectForm">
                        <mat-button-toggle id="starttask_create/select" style="width: 130px;" class="split-button-1">
                            {{'Create/Select' | translate}}
                        </mat-button-toggle>
                        <mat-button-toggle id="starttask_split_arrow" class="split-button-1 drop-down-button"
                            [matMenuTriggerFor]="dropdownMenuOne">
                            <mat-icon>arrow_drop_down</mat-icon>
                        </mat-button-toggle>
                    </mat-button-toggle-group>
                    <mat-menu #dropdownMenuOne="matMenu">
                        <button mat-menu-item id="createForm" (click)="clickEvent()">{{'Create New Form' |
                            translate}}</button>
                        <button mat-menu-item id="editForm" (click)="editForm()" *ngIf="editFormOptionEnable">{{'Edit
                            Form' | translate}}</button>
                        <button mat-menu-item id="selectExistForm" (click)="selectEvent()">{{'Select Existing Form' |
                            translate}}</button>
                        <!-- <button mat-menu-item id="selectCustomForm" (click)="selectCustomForm()">Select Custom
                                Form</button> -->
                    </mat-menu>
                </div>
            </div>
            <div fxLayout="row" *ngIf="taskPropertyForm.get('publicForm').value===true">
                <div style="width: 100%;">
                    <a id="publicFormURL" style="color: hsl(234, 75%, 52%);">{{publicFormUrl}}</a>
                </div>

                <mat-icon matTooltip="Copy URL" id="copyToClipboard" ngxClipboard *ngIf="publicFormUrl"
                    (click)="copyToClipboard()" class="float-right mr-2" style="cursor: pointer;">content_copy
                </mat-icon>

                <mat-icon matTooltip="Open in new tab" id="copyToClipboard" ngxClipboard *ngIf="publicFormUrl"
                    (click)="openInNewTab(publicFormUrl)" class="float-right" style="cursor: pointer;">open_in_new
                </mat-icon>

            </div>
        </ng-container>
        <ng-container *ngIf="taskPropertyForm.get('propertyType').value === 'scheduled'">
            <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
                <mat-form-field style="width: 40%;">
                    <input matInput id="schedulerExpression" placeholder="{{'Scheduler Expression' | translate}}"
                        formControlName="schedulerExpression" (focusout)="showCronExpression()">
                    <mat-error>{{'Scheduler Expression is required' | translate}}</mat-error>
                </mat-form-field>
                <div fxLayout="column">
                    <div style="margin-top: 22px;" *ngIf="cronExpression">
                        :&nbsp; &nbsp;{{cronExpression}}
                    </div>
                </div>

            </div>
        </ng-container>
        <ng-container *ngIf="taskPropertyForm.get('propertyType').value === 'launch'">
            <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 2%;">
                <mat-form-field>
                    <textarea id="jsonText" matInput
                        placeholder="{{'Give an example input JSON payload with all possible elements' | translate}}"
                        style="height: 100px;" formControlName="jsonText" (focusout)="getJsonText()"></textarea>
                    <mat-error *ngIf="taskPropertyForm.get('jsonText').errors?.validationError">{{'Invalid json' |
                        translate}}
                    </mat-error>
                </mat-form-field>
            </div>
        </ng-container>
    </ng-container>
    <ng-container
        *ngIf="taskType === 'USER_TASK' || taskType === 'APPROVAL_TASK' || (taskType === 'START_TASK' && this.taskPropertyForm.get('propertyType').value === 'manual')">
        <ng-container *ngIf="taskType !== 'START_TASK'">
            <div fxLayout="row" fxLayoutGap="10px">
                <mat-form-field>
                    <input matInput id="usertask_name" placeholder="{{'Name' | translate}} *" formControlName="name">
                    <mat-error>{{'Name is required' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <input matInput id="usertask_formIdentifier" placeholder="{{'Form Identifier' | translate}} *"
                        formControlName="formIdentifier" readonly="true">
                    <mat-error>{{'Form identifier is required' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field style="width: 100px;" *ngIf="isCustomPage===false">
                    <input matInput id="usertask_formVersion" placeholder="{{'Form Version' | translate}} *"
                        formControlName="formVersion" readonly="true">
                </mat-form-field>
                <div style="padding-top: 2.2%">
                    <mat-button-toggle-group id="usertask_selectForm">
                        <mat-button-toggle style="width: 130px;" id="usertask_create/select" class="split-button-1">
                            {{'Create/Select' | translate}}
                        </mat-button-toggle>
                        <mat-button-toggle id="usertask_arrow" class="split-button-1 drop-down-button"
                            [matMenuTriggerFor]="dropdownMenuOne">
                            <mat-icon>arrow_drop_down</mat-icon>
                        </mat-button-toggle>
                    </mat-button-toggle-group>
                    <mat-menu #dropdownMenuOne="matMenu">
                        <button mat-menu-item id="usertask_createFom" (click)="clickEvent()">{{'Create New Form' |
                            translate}}</button>
                        <button mat-menu-item id="usertask_editForm" (click)="editForm()"
                            *ngIf="editFormOptionEnable">{{'Edit Form' | translate}}</button>
                        <button mat-menu-item id="usertask_selectExistForm" (click)="selectEvent()">{{'Select Existing
                            Form' | translate}}</button>
                        <!-- <button mat-menu-item id="selectCustomForm" (click)="selectCustomForm()">Select Custom
                                Form</button> -->
                    </mat-menu>
                </div>
            </div>
            <!-- <table style="padding-left: 2%;"> -->
            <mat-card style="background-color: rgba(220, 240, 241, 0.904)">
                <span class="fs_12 font-weight-bold">{{'Assign To' | translate}}</span>
                <div fxLayout="row" fxLayoutGap="10px">

                    <mat-form-field>
                        <input matInput id="usertask_autoAssignUser" placeholder="{{'Auto Assign User' | translate}}"
                            matInput [matAutocomplete]="autoo" formControlName="autoAssignUser">
                        <mat-autocomplete #autoo="matAutocomplete">
                            <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                                [label]="field.fieldType" [disabled]="field.disabled" [id]="field.fieldType">
                                <mat-option [matTooltip]="value.fieldId" [value]="value.fieldId" [id]="value.fieldName"
                                    *ngFor="let value of field.fieldVO">
                                    {{value.fieldName}}</mat-option>
                            </mat-optgroup>
                        </mat-autocomplete>
                    </mat-form-field>
                    <div style="width: 33%;">
                        <p style="margin-top: -10px;">{{'Select User' | translate}}</p>
                        <div class="flag-container-css" style="margin-top: -8px;" *ngIf="assignUsersList.length === 0"
                            (click)="openTaskOwnerDialog()">
                            <mat-icon appearance="filled" class="flag-css" id="person_icon"
                                matTooltip="{{'Select Team' | translate}}"> person
                            </mat-icon>
                            <mat-icon class="circle-css">add_circle</mat-icon>
                        </div>
                        <div *ngIf="assignUsersList.length > 0">
                            <div class="row w-100 mx-0" style="margin-top: -8px;">
                                <div *ngFor="let user of assignUsersList;let i = index;">
                                    <div *ngIf="i<=3" (click)="openTaskOwnerDialog()"
                                        style="width: 30px; height: 30px; line-height: 30px; border-radius: 50%;text-align: center; padding: 0px;cursor: pointer;"
                                        class="hover-class" [style.margin-left]="i>0?'-8px':''"
                                        [matTooltip]="user?.firstName + ' ' + user?.lastName"
                                        [style.background]="assigneeUserColorArray[i]">
                                        <span
                                            style="font-size: 12px; color: white;font-weight: 100;">{{setUserProfilename(user)}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="width: 33%;">
                        <p style="margin-top: -10px;">{{'Select Team' | translate}}</p>
                        <div class="flag-container-css" *ngIf="teamList.length === 0" style="margin-top: -8px;"
                            (click)="openTeamsDialog()">
                            <mat-icon appearance="filled" class="flag-css" id="person_icon">
                                person
                            </mat-icon>
                            <mat-icon class="circle-css">add_circle</mat-icon>
                        </div>

                        <div *ngIf="teamList.length > 0">
                            <div class="row w-100 mx-0" style="margin-top: -8px;">
                                <div *ngFor="let user of teamList;let i = index;">
                                    <div *ngIf="i<=3" (click)="openTeamsDialog()"
                                        style="width: 30px; height: 30px; line-height: 30px; border-radius: 50%;text-align: center; padding: 0px;cursor: pointer;"
                                        class="hover-class" [style.margin-left]="i>0?'-8px':''"
                                        [matTooltip]="user?.name" [style.background]="assigneeUserColorArray[i]">
                                        <span
                                            style="font-size: 12px; color: white;font-weight: 100;">{{getUserFirstAndLastNamePrefix(user?.name)}}</span>
                                    </div>
                                    <ng-container *ngIf="i===4" (click)="openTeamsDialog()">
                                        <div style=" width: 30px; height: 30px; line-height: 30px; border-radius: 50%;  background-color: rgb(192, 192, 192); text-align: center; padding: 0px;cursor: pointer; margin-left:-8px;"
                                            class="hover-class">
                                            <span
                                                style="font-size: 12px; color: grey;font-weight: 100;">+{{getRemainingAssigneeUserCount(user?.name)}}</span>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </mat-card>
        </ng-container>
        <!-- </table> -->
        <ng-container>
            <div *ngIf="taskType === 'USER_TASK' || taskType === 'APPROVAL_TASK'" fxLayout="row" fxLayoutGap="95px"
                style="padding-top: 2%;width:100%">
                <div fxLayout="column">
                    <mat-card-title style="padding-top:15px;font-size:medium;font-weight: normal;">{{'Due Date' |
                        translate}}
                    </mat-card-title>
                </div>
                <div fxLayout="column">
                    <div fxLayout="row" fxLayoutGap="10px">
                        <mat-form-field>
                            <input matInput id="userapproval_dueTime" type="number" min="0" placeholder="Due Time"
                                formControlName="userapproval_dueTime" oninput="this.value = Math.abs(this.value)"
                                (focusout)="setErrorsForDueTime()">
                            <mat-error *ngIf="taskPropertyForm.get('userapproval_dueTime').errors?.required">
                                {{'Due time is required' | translate}}</mat-error>
                            <mat-error *ngIf="taskPropertyForm.get('userapproval_dueTime').errors?.mindueTime">
                                {{'Due time should be above 10 minutes' | translate}}</mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>{{'Units' | translate}}</mat-label>
                            <mat-select id="userapproval_dueTimeUnits" formControlName="dueTimeUnits">
                                <mat-option value="minutes" id="minutes">{{'Minutes' | translate}}</mat-option>
                                <mat-option value="hours" id="hours">{{'Hours' | translate}}</mat-option>
                                <mat-option value="days" id="days">{{'Days' | translate}}</mat-option>
                            </mat-select>
                            <mat-error>
                                {{'Unit is required' | translate}}</mat-error>
                            <!-- *ngIf="taskPropertyForm.get('dueTimeUnits').errors?.dueUnits && userForm.submitted" -->
                        </mat-form-field>
                    </div>
                </div>
                <!-- <div style="padding-left: 200px;">
                        <mat-spinner [diameter]="40" *ngIf="!pageRendered && editFormSpinner"></mat-spinner>
                    </div> -->
            </div>
            <!-- <mat-card-title style="padding-top: 2%;">
                <span>Task Completion Reminder</span>
            </mat-card-title> -->
            <div *ngIf="taskType === 'USER_TASK' || taskType === 'APPROVAL_TASK'" fxLayout="row" fxLayoutGap="10px"
                style="width:100%">
                <button mat-raised-button color="primary" id="addremainder" [disabled]="!enableRemainder" type="button"
                    (click)="addRemainder()">{{'Add Reminder' | translate}}</button>
            </div>
            <ng-container *ngIf="enableFieldMapping">
                <mat-card-title style="padding-top: 2%;">{{'Initial Values' | translate}}</mat-card-title>
                <div class="row w-100">
                    <div class="col-md-12 pr-0">
                        <table style="width: 100%;">
                            <tr>
                                <th>
                                    <mat-label style="font-weight: 500;">{{'Form Controls' | translate}}</mat-label>
                                </th>
                                <th>
                                    <div fxLayout="row" fxLayoutAlign="space-between center">
                                        <mat-label style="font-weight: 500; padding-top: 5px;">{{'Assign Values From
                                            Fields' | translate}}</mat-label>
                                        <button mat-icon-button [matMenuTriggerFor]="menuMap"
                                            #menuTriggerMap="matMenuTrigger" class="float-right"
                                            aria-label="Example icon-button with a menu" type="button">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <mat-label style="font-weight: 500;">{{'Show In My Tasks' | translate}}</mat-label>
                                </th>
                                <th>
                                    <mat-label style="font-weight: 500;">{{'Display Order' | translate}}</mat-label>
                                </th>
                            </tr>
                            <!-- <ng-container formGroupName="fieldMapping"> -->
                            <tr *ngFor="let field of fieldsListForMapping">
                                <ng-container *ngIf="field.repeatableFieldId === null">
                                    <ng-container formGroupName="fieldMapping">
                                        <td>
                                            <!-- <mat-label>{{field.fieldName}}</mat-label> -->
                                            <div fxLayout="row">
                                                <mat-icon class="mr-1 f_21 pt-1" [style.color]="field.color">
                                                    {{getIcon(field)}}
                                                </mat-icon>
                                                <h4 class="f_12">{{field.fieldName}}</h4>
                                            </div>
                                        </td>
                                        <td>
                                            <div fxLayout="row">
                                                <input matInput placeholder="{{'Variable' | translate}}"
                                                    [id]="'fieldName_'+i" readonly class="border-css"
                                                    [value]="getValue(taskPropertyForm.get('fieldMapping').get(field.fieldId).value)">
                                                <button mat-icon-button [matMenuTriggerFor]="menu1"
                                                    #menuTrigger1="matMenuTrigger" class="float-right"
                                                    aria-label="Example icon-button with a menu"
                                                    (mousedown)="mousedown(field)" type="button">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <ng-container formGroupName="showInTaskList">
                                        <td>

                                            <ng-container [formGroupName]="field.fieldId">
                                                <mat-checkbox style="margin-left: 3px;"
                                                    formControlName="showInTaskListEnable"
                                                    (change)="setFieldNames($event,field.fieldName,taskPropertyForm.get('showInTaskList').get(field.fieldId).get('name'),taskPropertyForm.get('showInTaskList').get(field.fieldId).get('order'),
                                                                taskPropertyForm.get('showInTaskList').get(field.fieldId).get('enableWildCard'), i)">
                                                </mat-checkbox>
                                            </ng-container>
                                        </td>
                                        <td>
                                            <ng-container [formGroupName]="field.fieldId">
                                                <input [id]="'order' + i" matInput type="number" formControlName="order"
                                                    min="1" oninput="this.value = Math.abs(this.value)">
                                            </ng-container>
                                        </td>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="field.repeatableFieldId !== null">
                                    <td>
                                        <!-- <mat-label>{{field.repeatableFieldName}}</mat-label> -->
                                        <div fxLayout="row">
                                            <mat-icon class="mr-1 f_21 pt-1" [style.color]="field.color">list_alt
                                            </mat-icon>
                                            <h4 class="f_12">{{field.repeatableFieldName}}</h4>
                                        </div>
                                    </td>
                                    <td>
                                        <div fxLayout="row">
                                            <input matInput placeholder="{{'Variable' | translate}}"
                                                [id]="'fieldName_'+i" readonly class="border-css"
                                                [value]="getRepeatableFieldValue(taskPropertyForm.get('fieldMapping').get(field.repeatableFieldId))">
                                            <button mat-icon-button [matMenuTriggerFor]="menu2"
                                                #menuTrigger2="matMenuTrigger" class="float-right"
                                                aria-label="Example icon-button with a menu"
                                                (mousedown)="mousedown(field)" type="button">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                        </div>
                                    </td>
                                </ng-container>
                            </tr>
                            <ng-container formGroupName="fieldMapping">
                                <ng-container *ngFor="let formName of repeatableFieldsListFormName">
                                    <ng-container
                                        *ngIf="taskPropertyForm.get('fieldMapping').get(formName.repeatableFieldId).value!==undefined 
                                          && taskPropertyForm.get('fieldMapping').get(formName.repeatableFieldId).value!==null 
                                          && taskPropertyForm.get('fieldMapping').get(formName.repeatableFieldId).value!==''">
                                        <ng-container [formGroupName]="getformGroupName(formName.repeatableFieldId)">
                                            <tr *ngFor="let field of repeatableFieldsListForMapping">
                                                <ng-container
                                                    *ngIf="field.repeatableFieldId === formName.repeatableFieldId">
                                                    <td>
                                                        <!-- <mat-label>{{getFieldlabel(field)}}</mat-label> -->
                                                        <div fxLayout="row">
                                                            <mat-icon class="mr-1 f_21 pt-1"
                                                                [style.color]="field.color">
                                                                {{getIcon(field)}}</mat-icon>
                                                            <h4 class="f_12">{{getFieldlabel(field)}}</h4>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <!-- <mat-select [matTooltip] = "getToolTip(taskPropertyForm.get('fieldMapping').get(getformGroupName(formName.repeatableFieldId)).get(field.fieldId).value, 'normalField')" [id]="field.repeatableFieldId + 'repeatable_variable'"
                                                        placeholder="Variable" [formControlName]="field.fieldId">
                                                        <mat-option value=""></mat-option>
                                                        <mat-optgroup *ngFor="let field of initialFieldList"
                                                            style="font-weight: bold;" [label]="field.fieldType"
                                                            [disabled]="field.disabled" [id]="field.fieldType">
                                                            <ng-container *ngFor="let value of field.fieldVO">
                                                                <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId" [id]="value.fieldId">
                                                                    {{value.fieldName}}</mat-option>
                                                            </ng-container>
                                                        </mat-optgroup>
    
                                                         </mat-select> -->
                                                        <div fxLayout="row">
                                                            <input matInput placeholder="{{'Variable' | translate}}"
                                                                [id]="'fieldName_'+i" readonly class="border-css"
                                                                [value]="getValue(taskPropertyForm.get('fieldMapping').get(formName.repeatableFieldId+'ya').get(field.fieldId).value)">
                                                            <button mat-icon-button [matMenuTriggerFor]="menu3"
                                                                #menuTrigger3="matMenuTrigger" class="float-right"
                                                                aria-label="Example icon-button with a menu"
                                                                type="button"
                                                                (mousedown)="repeatableFieldMousedown(field,formName.repeatableFieldId)">
                                                                <mat-icon>more_vert</mat-icon>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </ng-container>
                                            </tr>
                                        </ng-container>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                            <!-- </ng-container> -->

                        </table>
                    </div>
                    <!-- <div class="col-md-6 pl-0">
                        <table style="border-left: 0px;">
                            <tr>
                                <th style="padding: 15px 5px; width: 50%;">
                                    <mat-label style="font-weight: 500;">Show In My Tasks</mat-label>
                                </th>
                                <th>
                                    <mat-label style="font-weight: 500;">Display Order</mat-label>
                                </th>
                            </tr>
                            <ng-container formGroupName="showInTaskList">
                                <tr *ngFor="let field of fieldsList; let i = index">
                                    <ng-container [formGroupName]="field.fieldId">
                                        <td style="padding: 13px 5px;">
                                            <mat-checkbox style="margin-left: 3px;" [id]="'showInTaskListEnable' + i"
                                                formControlName="showInTaskListEnable"
                                                (change)="setFieldNames($event,field.fieldName,taskPropertyForm.get('showInTaskList').get(field.fieldId).get('name'),taskPropertyForm.get('showInTaskList').get(field.fieldId).get('order'),
                                                    taskPropertyForm.get('showInTaskList').get(field.fieldId).get('enableWildCard'), i)">
                                            </mat-checkbox>
                                        </td>
                                        <td>
                                            <input [id]="'order' + i" matInput type="number" formControlName="order"
                                                min="1" oninput="this.value = Math.abs(this.value)">
                                        </td>
                                    </ng-container>
                                </tr>
                            </ng-container>
                        </table>
                    </div> -->
                </div>
            </ng-container>
            <ng-container *ngIf="taskType === 'USER_TASK' || taskType === 'APPROVAL_TASK' || taskType === 'START_TASK'">
                <div fxLayout="row" fxLayoutGap="10px" style="padding-top: 4%;">
                    <div fxLayout="column" *ngIf="taskType === 'USER_TASK' || (taskType==='START_TASK' && taskPropertyForm.get('propertyType').value === 'manual'
                        && taskPropertyForm.get('publicForm').value !== true)" style="width: 50%;">
                        <mat-form-field>
                            <textarea matInput id="message" name="message" formControlName="message"
                                placeholder="{{'Message to be shown while submit' | translate}}" rows="3">
                            </textarea>
                            <mat-error>{{'Message is required' | translate}}</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="column" *ngIf="taskType==='START_TASK' && taskPropertyForm.get('propertyType').value === 'manual'
                           && taskPropertyForm.get('publicForm').value === true" style="width: 98%;">
                        <mat-form-field>
                            <textarea matInput id="starttask_message" name="message" formControlName="message"
                                placeholder="{{'Message to be shown after submition' | translate}}" rows="3">
                            </textarea>
                            <mat-error>{{'Message is required' | translate}}</mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="column" *ngIf="taskType === 'APPROVAL_TASK'" style="width: 98%;">
                        <div fxLayout="row">
                            <mat-form-field style="width: 98%;">
                                <textarea matInput id="approveMessage" name="approveMessage"
                                    formControlName="approveMessage"
                                    placeholder="{{'Message to be shown while approve' | translate}}" rows="2">
                                    </textarea>
                                <mat-error>{{'Message is required' | translate}}</mat-error>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row">
                            <mat-form-field style="width: 98%;">
                                <textarea matInput id="rejectMessage" name="rejectMessage"
                                    formControlName="rejectMessage"
                                    placeholder="{{'Message to be shown while reject' | translate}}" rows="2">
                                    </textarea>
                                <mat-error>{{'Message is required' | translate}}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="mat-slide-toggle-content" style="width: 50%;" *ngIf="taskType === 'USER_TASK' || (taskType==='START_TASK' && taskPropertyForm.get('propertyType').value === 'manual'
                        && taskPropertyForm.get('publicForm').value !== true)">
                        <mat-slide-toggle id="usertask_enableSaveAsDraft" color="accent"
                            formControlName="enableSaveAsDraft">
                            {{'Enable Save As Draft Option' | translate}}
                        </mat-slide-toggle>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="taskType === 'APPROVAL_TASK'">
                <div fxLayout="row" fxLayoutGap="10px">
                    <mat-form-field style="width:24%">
                        <input matInput id="approvaltask_launchButtonName"
                            placeholder="{{'Launch Button Name' | translate}} *" formControlName="launchButtonName">
                        <mat-error>{{'Launch Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field style="width:24%">
                        <input matInput id="approvaltask_aproveButtonName"
                            placeholder="{{'Approval Button Name' | translate}} *" formControlName="aproveButtonName">
                        <mat-error>{{'Approval Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field style="width:24%">
                        <input matInput id="approvaltask_rejectButtonName"
                            placeholder="{{'Reject Button Name' | translate}} *" formControlName="rejectButtonName">
                        <mat-error>{{'Reject Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field style="width:24%">
                        <input matInput id="sendBackButtonName" placeholder="{{'Send Back Button Name' | translate}} *"
                            formControlName="sendBackButtonName">
                        <mat-error>{{'Send Back Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                </div>
                <div fxLayout="row" fxLayoutGap="10px">
                    <!-- <div fxLayout="column" style="padding-top: 4%;width:20%">
                            
                        </div> -->
                    <div fxLayout="column" style="padding-top: 3%;">
                        <mat-slide-toggle id="approvaltask_enableSaveAsDraft" color="accent"
                            formControlName="enableSaveAsDraft">
                            {{'Enable Save As Draft Option' | translate}}
                        </mat-slide-toggle>
                    </div>
                    <div fxLayout="column" style="padding-top: 3%;">
                        <mat-slide-toggle id="approvaltask_printOnScreen" color="accent"
                            formControlName="printOnScreen">
                            {{'Enable Print On Approval' | translate}}
                        </mat-slide-toggle>
                    </div>
                    <div fxLayout="column" style="padding-top: 3%;">
                        <mat-slide-toggle id="approvaltask_enablePrinting" color="accent"
                            formControlName="enablePrinting">
                            {{'Enable Printing' | translate}}
                        </mat-slide-toggle>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="taskType === 'USER_TASK' || taskType === 'START_TASK'">
                <div fxLayout="row" fxLayoutGap="10px" style="padding-top: 4%;">
                    <mat-form-field style="width: 30%;">
                        <input matInput id="usertask_launchButtonName"
                            placeholder="{{'Launch Button Name' | translate}} *" formControlName="launchButtonName">
                        <mat-error>{{'Launch Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field style="width: 30%;">
                        <input matInput id="usertask_approveButtonName"
                            placeholder="{{'Approve Button Name' | translate}} *" formControlName="approveButtonName">
                        <mat-error>{{'Approve Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <div style="width: 30%;" *ngIf="taskType === 'USER_TASK'">
                        <mat-slide-toggle id="usertask_cancelWorkflow" color="accent"
                            formControlName="isCancellableWorkflow" (change)="addCancelValidation($event)">
                            {{'Cancel Workflow' | translate}}
                        </mat-slide-toggle>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutGap="20px" *ngIf="taskType === 'START_TASK'">
                    <mat-form-field style="width: 30%;">
                        <input matInput id="starttask_initialLaunchButton"
                            placeholder="{{'Initial Launch Button Name' | translate}}"
                            formControlName="initialLaunchButton" required>
                        <mat-error>{{'Initial Launch Button Name is required' | translate}}</mat-error>
                    </mat-form-field>
                    <div style="width: 30%;padding-top: 2%;">
                        <mat-slide-toggle id="starttask_cancelWorkflow" color="accent"
                            formControlName="isCancellableWorkflow" (change)="addCancelValidation($event)">
                            {{'Cancel Workflow' | translate}}
                        </mat-slide-toggle>
                    </div>
                </div>
                <ng-container *ngIf="taskPropertyForm.get('isCancellableWorkflow').value === true">
                    <div fxLayout="row" fxLayoutGap="20px" style="padding-top: 2%;">
                        <mat-form-field>
                            <input matInput id="starttask_cancelButtonName"
                                placeholder="{{'Cancel Button Name' | translate}} *" formControlName="cancelButtonName">
                            <mat-error>{{'Cancel Button Name is required' | translate}}</mat-error>
                        </mat-form-field>
                        <div class="mat-slide-toggle-content" style="width: 40%;" *ngIf="taskType !== 'START_TASK'">
                            <mat-slide-toggle id="starttask_endWorkflowWhenCancelled" color="accent"
                                formControlName="endWorkflowWhenCancelled">
                                {{'End Workflow When Cancelled' | translate}}
                            </mat-slide-toggle>
                        </div>
                    </div>
                </ng-container>


            </ng-container>
        </ng-container>
    </ng-container>
    <ng-container *ngIf="taskType === 'EMAIL_TASK'">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field style="width: 20%;">
                <input matInput id="emailtask_name" placeholder="{{'Name' | translate}}" formControlName="name"
                    required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 26%;">
                <input matInput id="emailtask_fromName" placeholder="{{'Sender Name' | translate}}"
                    formControlName="senderName">
                <mat-error>{{'Sender Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 50%;">
                <input matInput id="emailtask_emailFrom" placeholder="{{'Sender Email Id' | translate}}"
                    formControlName="emailFrom">
                <mat-error *ngIf="taskPropertyForm.get('emailFrom').errors?.required && userForm.submitted">{{'Sender
                    email id is required' | translate}}</mat-error>
                <mat-error *ngIf="taskPropertyForm.get('emailFrom').errors?.email">{{'Invalid email id' | translate}}
                </mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
            <div style="padding-top: 19px;">
                <mat-slide-toggle color="accent" (change)="arrayToggle($event)" formControlName="fieldType">
                    {{'Is Array Fields' | translate}}
                </mat-slide-toggle>
            </div>
            <mat-form-field *ngIf="taskPropertyForm.get('fieldType').value === true" style="width: 35%;">
                <mat-label>{{'Select Repeatable Field' | translate}}</mat-label>
                <mat-select id="emailtask_repeatableField" formControlName="repeatableField">
                    <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                        [label]="field.fieldType" [disabled]="field.disabled">
                        <ng-container *ngFor="let value of field.fieldVO">
                            <mat-option [matTooltip]="value.fieldName"
                                (onSelectionChange)="setEmailFieldList($event, value)" [value]="value.fieldId"
                                *ngIf="value.datatype === 'array'">
                                {{value.fieldName}}</mat-option>
                        </ng-container>
                    </mat-optgroup>
                </mat-select>
            </mat-form-field>
        </div>
        <mat-card style="background-color: #F0FFFF;">
            <div fxLayout="column">
                <mat-form-field>
                    <mat-label>{{'Email To' | translate}} *</mat-label>
                    <mat-select multiple id="emailtask_emailToPageFields" formControlName="emailToPageFields">
                        <mat-optgroup *ngFor="let field of initialFieldListForEmail" style="font-weight: bold;"
                            [label]="field.fieldType" [disabled]="field.disabled">
                            <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                *ngFor="let value of field.fieldVO">
                                {{value.fieldName}}</mat-option>
                        </mat-optgroup>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between end">
                <button mat-raised-button id="emailtask_addCustom" type="button" class="button-css"
                    (click)="addConstantEmails()" color="primary">{{'Add Custom Emails' | translate}}</button>

                <button mat-button id="emailtask_close" type="button" *ngIf="showConstantEmails" (click)="closeEmails()"
                    color="primary">
                    <mat-icon>close</mat-icon>
                </button>
            </div>

            <div fxLayout="column" *ngIf="showConstantEmails">
                <app-yoroflow-chip #emailTo (chip)="getEmailToChip($event)" [data]="emailTaskFormInfo.emailTo">
                </app-yoroflow-chip>
            </div>
            <mat-error *ngIf="taskPropertyForm.get('emailTo').errors?.chip && userForm.submitted">
                {{'Either Email To or Custom Email To is required' | translate}}
            </mat-error>
        </mat-card>

        <mat-card style="margin-top: 1%;background-color: #B0C4DE;">
            <mat-slide-toggle id="cc" (change)="toggleCC($event)" formControlName="cc">{{'CC' | translate}}
            </mat-slide-toggle>
            <div fxLayout="column" *ngIf="taskPropertyForm.get('cc').value===true">
                <mat-form-field>
                    <mat-label>{{'Email CC' | translate}}</mat-label>
                    <mat-select id="emialCC" multiple formControlName="emailCCPageFields">
                        <mat-optgroup *ngFor="let field of initialFieldListForEmail" style="font-weight: bold;"
                            [label]="field.fieldType" [disabled]="field.disabled" [id]="field.fieldType">
                            <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                *ngFor="let value of field.fieldVO" [id]="value.fieldName">
                                {{value.fieldName}}</mat-option>
                        </mat-optgroup>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between center" *ngIf="taskPropertyForm.get('cc').value===true">
                <button id="customEmailCC" mat-raised-button type="button" class="button-css"
                    (click)="addConstantEmailsCC()" color="primary">{{'Add Custom Emails CC' | translate}}</button>

                <button mat-button id="custom_close" type="button" *ngIf="showConstantEmailsCC"
                    (click)="closeEmailsCC()" color="primary">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
            <div fxLayout="column" fxLayoutGap="10px"
                *ngIf="taskPropertyForm.get('cc').value===true && showConstantEmailsCC">
                <app-yoroflow-chip #emailCc (chip)="getEmailCcChip($event)" [data]="emailTaskFormInfo.emailCC">
                </app-yoroflow-chip>

            </div>
            <mat-error *ngIf="taskPropertyForm.get('emailCC').errors?.emailCC && userForm.submitted">
                {{'Either Email CC or Custom Email CC is required' | translate}}
            </mat-error>
        </mat-card>
        <mat-card style="margin-top: 1%; background-color: #D3D3D3;">
            <mat-slide-toggle id="bcc" (change)="toggleBCC($event)" formControlName="bcc">BCC</mat-slide-toggle>
            <div fxLayout="column" *ngIf="taskPropertyForm.get('bcc').value===true">
                <mat-form-field>
                    <mat-label>{{'Email BCC' | translate}}</mat-label>
                    <mat-select id="emailBCCPageFields" multiple formControlName="emailBCCPageFields">
                        <mat-optgroup *ngFor="let field of initialFieldListForEmail" style="font-weight: bold;"
                            [label]="field.fieldType" [disabled]="field.disabled" [id]="field.fieldType">
                            <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                *ngFor="let value of field.fieldVO" [id]="value.fieldName">
                                {{value.fieldName}}</mat-option>
                        </mat-optgroup>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between center" *ngIf="taskPropertyForm.get('bcc').value===true">
                <button id="customEmailCC" mat-raised-button class="button-css" type="button"
                    (click)="addConstantEmailsBCC()" color="primary">{{'Add Custom Emails BCC' | translate}}</button>

                <button mat-button id="close" type="button" *ngIf="showConstantEmailsBCC" (click)="closeEmailsBCC()"
                    color="primary">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
            <div fxLayout="column" fxLayoutGap="10px"
                *ngIf="taskPropertyForm.get('bcc').value===true && showConstantEmailsBCC">
                <app-yoroflow-chip #emailBcc (chip)="getEmailBccChip($event)" [data]="emailTaskFormInfo.emailBCC">
                </app-yoroflow-chip>
            </div>
            <mat-error *ngIf="taskPropertyForm.get('emailBCC').errors?.emailBCC && userForm.submitted">
                {{'Either Email BCC or Custom Email BCC is required' | translate}}
            </mat-error>
        </mat-card>
        <!-- <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1.5%;">
                <mat-form-field style="width: 100%;">
                    <input matInput id="subject" placeholder="Add a subject" formControlName="subject">
                    <mat-error>Subject is required</mat-error>
                </mat-form-field>
        </div> -->
        <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 3%;">
            <mat-label>{{'Add a subject' | translate}}</mat-label>
            <textarea id="subject" #subjectPosition (click)="openAutocomplete(subjectPosition)"
                [matAutocomplete]="emailSubjectAutocomplete" name="subject" formControlName="subject"
                (keyup)="openAutocomplete(subjectPosition)" placeholder="{{'Type ${ to search...' | translate}}"
                rows="3">

            </textarea>
            <mat-error *ngIf="taskPropertyForm.get('subject').errors?.repeated && userForm.submitted">{{'Select atleast
                one field from array' | translate}}
            </mat-error>
            <mat-autocomplete #emailSubjectAutocomplete="matAutocomplete">
                <mat-option (onSelectionChange)="removeList($event)"
                    [value]="addValueForTextAreaAutoComplete(taskPropertyForm.get('subject').value, value.fieldId)"
                    *ngFor="let value of autocompleteInitialFieldList;">
                    {{value.fieldName}}</mat-option>
            </mat-autocomplete>
        </div>
        <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 3%;">

            <mat-label>{{'Email Template' | translate}} *</mat-label>

            <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 1%;">
                <app-quill-editor [inputEmail]="emailData" [fromEmailTask]="true" [emailObject]="this"
                    (emailValue)="getTemplate($event,userForm)" [systemEmailVariables]="data">
                </app-quill-editor>
            </div>

            <!-- <textarea id="emailTemplate" #emailTemplatePosition (click)="openAutocomplete(emailTemplatePosition)"
                [matAutocomplete]="emailAutocomplete" name="emailTemplate" formControlName="emailTemplate"
                (keyup)="openAutocomplete(emailTemplatePosition)" placeholder="Type ${ to search..." rows="5">

                </textarea> -->


            <mat-autocomplete #emailAutocomplete="matAutocomplete">

                <mat-option (onSelectionChange)="removeList($event)"
                    [value]="addValueForTextAreaAutoComplete(taskPropertyForm.get('emailTemplate').value, value.fieldId)"
                    *ngFor="let value of autocompleteInitialFieldList;">
                    {{value.fieldName}}</mat-option>
            </mat-autocomplete>
        </div>
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field style="width: 50%;">
                <mat-label>{{'Attach File' | translate}}</mat-label>
                <mat-select id="attachFile" formControlName="attachFile">
                    <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                        [label]="field.fieldType" [disabled]="field.disabled">
                        <ng-container *ngFor="let value of field.fieldVO">
                            <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                *ngIf="value.datatype === 'file'">
                                {{value.fieldName}}</mat-option>
                        </ng-container>
                    </mat-optgroup>
                </mat-select>
            </mat-form-field>
        </div>
    </ng-container>
    <ng-container *ngIf="taskType === 'DECISION_TASK'">
        <div fxLayout="column" fxLayoutGap="10px">
            <div fxLayout="row" fxFlex="50">
                <mat-form-field>
                    <input matInput id="name" placeholder="{{'Name' | translate}}" formControlName="name" required>
                    <mat-error>{{'Name is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutGap="10px">
                <mat-label>{{'If' | translate}}</mat-label>
                <div id="decisionLogic" formGroupName="decisionLogic" style="width: 20%;">
                    <mat-select formControlName="logicOperator" placeholder="Logic"
                        style="width: 100%;border: 1px groove rgb(252, 252, 252);">
                        <mat-option value="OR">{{'Any' | translate}}</mat-option>
                        <mat-option value="AND">{{'All' | translate}}</mat-option>
                        <mat-option value="NONE">{{'None' | translate}}</mat-option>
                    </mat-select>
                    <mat-error style="font-size: 13px;" *ngIf="taskPropertyForm.get('decisionLogic').get('logicOperator').errors?.required
                        && userForm.submitted">{{'Logic is required' | translate}}</mat-error>
                </div>
                <mat-label> {{'of the following matches' | translate}}</mat-label>
            </div>
        </div>
        <div formGroupName="decisionLogic">
            <div formArrayName="rules" *ngFor="let rule of getRulesFormArray().controls; let roleIndex = index"
                style="margin-top: 2%;">
                <div [formGroupName]="roleIndex" fxLayout="row" fxLayoutGap="15px">
                    <div formGroupName="leftAssignment" fxLayout="column">
                        <ng-container *ngIf="rule.get('leftAssignment').get('variableType').value ==='pagefield'">
                            <!-- <mat-form-field>
                                <mat-label>Left Assignment</mat-label>
                                <mat-select id="variableName" formControlName="variableName">
                                    <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                                        [label]="field.fieldType" [disabled]="field.disabled">
                                        <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                            (onSelectionChange)="setOperators($event,value,roleIndex)"
                                            *ngFor="let value of field.fieldVO">
                                            {{value.fieldName}}</mat-option>
                                    </mat-optgroup>
                                </mat-select>
                                <mat-error *ngIf="rule.get('leftAssignment').get('variableName').errors?.required">
                                    Left
                                    Assignment is required</mat-error>
                            </mat-form-field> -->
                            <mat-form-field>
                                <mat-label>{{'Left Assignment' | translate}}</mat-label>
                                <input matInput id="variableName" formControlName="variableName">
                                <mat-icon matSuffix [matMenuTriggerFor]="menu4" #menuTrigger4="matMenuTrigger"
                                    (click)="setRoleIndex(roleIndex,'leftAssignment')">
                                    more_vert</mat-icon>
                                <mat-error *ngIf="rule.get('leftAssignment').get('variableName').errors?.required">
                                    {{'Left Assignment is required' | translate}}</mat-error>
                            </mat-form-field>
                        </ng-container>
                        <ng-container *ngIf="rule.get('leftAssignment').get('variableType').value ==='constant'">
                            <mat-form-field>
                                <ng-container
                                    *ngIf="rule.get('leftAssignment').get('dataType').value!=='Date' && rule.get('leftAssignment').get('dataType').value!=='Number' && rule.get('leftAssignment').get('dataType').value !=='Boolean'">
                                    <input matInput id="variableName" type="text"
                                        placeholder="{{'Left Assignment' | translate}}" formControlName="variableName">
                                </ng-container>
                                <ng-container *ngIf="rule.get('leftAssignment').get('dataType').value ==='Date'">
                                    <div fxLayout="row">
                                        <input matInput id="variableName" [matDatepicker]="picker"
                                            placeholder="{{'Left Date' | translate}}" formControlName="variableName">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="rule.get('leftAssignment').get('dataType').value ==='Number'">
                                    <input matInput id="variableName" type="number"
                                        placeholder="{{'Left Assignment' | translate}}" formControlName="variableName">
                                </ng-container>
                                <ng-container *ngIf="rule.get('leftAssignment').get('dataType').value ==='Boolean'">
                                    <mat-select id="variableName" formControlName="variableName"
                                        placeholder="Left Assignment">
                                        <mat-option value="true">{{'True' | translate}}</mat-option>
                                        <mat-option value="false">{{'False' | translate}}</mat-option>
                                    </mat-select>
                                </ng-container>
                                <mat-error *ngIf="rule.get('leftAssignment').get('variableName').errors?.required">
                                    {{'Left Assignment is required' | translate}}</mat-error>
                            </mat-form-field>
                        </ng-container>

                        <mat-radio-group id="variableType" aria-label="Select an option" formControlName="variableType"
                            (change)="variableTypeChangeLeft($event,roleIndex)">
                            <mat-radio-button value="pagefield">
                                {{'Page field' | translate}}</mat-radio-button>
                            <mat-radio-button value="constant" style="margin-left: 10px;">
                                {{'Constant' | translate}}</mat-radio-button>
                        </mat-radio-group>
                        <ng-container>
                            <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end end" style="margin-top: 8%;">
                                <mat-form-field>
                                    <mat-label>{{'Data Type' | translate}}</mat-label>
                                    <input matInput id="dataType" formControlName="dataType" readonly="true">
                                    <mat-icon matSuffix
                                        *ngIf="rule.get('leftAssignment').get('variableType').value ==='constant'"
                                        (click)="variableTypeChangeLeft(rule.get('leftAssignment').get('variableType'),roleIndex)"
                                        value="constant">
                                        create</mat-icon>
                                </mat-form-field>
                            </div>
                        </ng-container>
                    </div>

                    <mat-form-field>
                        <mat-select id="operator" placeholder="{{'Operator' | translate}}" formControlName="operator"
                            [disabled]="rule.get('leftAssignment').get('variableName').value === ''">
                            <mat-option *ngFor="let data of dataType[filterDataType[roleIndex]]" [value]="data.value">
                                {{data.description}}
                            </mat-option>
                        </mat-select>
                        <mat-error>{{'Operator is required' | translate}}</mat-error>
                    </mat-form-field>

                    <div formGroupName="rightAssignment" fxLayout="column">
                        <ng-container *ngIf="rule.get('rightAssignment').get('variableType').value ==='pagefield'">
                            <!-- <mat-form-field>
                                <mat-label>Right Assignment</mat-label>
                                <mat-select id="variableName" formControlName="variableName">
                                    <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                                        [label]="field.fieldType" [disabled]="field.disabled">
                                        <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                            (onSelectionChange)="setRightDataType($event,value,roleIndex)"
                                            *ngFor="let value of field.fieldVO">
                                            {{value.fieldName}}</mat-option>
                                    </mat-optgroup>
                                </mat-select>
                                <mat-error *ngIf="rule.get('rightAssignment').get('variableName').errors?.required">
                                    Right Assignment is required</mat-error>
                            </mat-form-field> -->
                            <mat-form-field>
                                <mat-label>{{'Right Assignment' | translate}}</mat-label>
                                <input matInput id="variableName" formControlName="variableName">
                                <mat-icon matSuffix [matMenuTriggerFor]="menu4" #menuTrigger4="matMenuTrigger"
                                    (click)="setRoleIndex(roleIndex,'rightAssignment')">
                                    more_vert</mat-icon>
                                <mat-error *ngIf="rule.get('rightAssignment').get('variableName').errors?.required">
                                    {{'Right Assignment is required' | translate}}</mat-error>
                            </mat-form-field>

                        </ng-container>
                        <ng-container *ngIf="rule.get('rightAssignment').get('variableType').value ==='constant'">
                            <mat-form-field>
                                <ng-container
                                    *ngIf="rule.get('rightAssignment').get('dataType').value !=='Date' && rule.get('rightAssignment').get('dataType').value !=='Number' && rule.get('rightAssignment').get('dataType').value !=='Boolean'">
                                    <input id="variableName" matInput type="text"
                                        placeholder="{{'Right Assignment' | translate}}" formControlName="variableName">
                                </ng-container>
                                <ng-container *ngIf="rule.get('rightAssignment').get('dataType').value ==='Number'">
                                    <input id="variableName" matInput type="number"
                                        placeholder="{{'Right Assignment' | translate}}" formControlName="variableName">
                                </ng-container>
                                <ng-container *ngIf="rule.get('rightAssignment').get('dataType').value ==='Date'">
                                    <div fxLayout="row">
                                        <input id="variableName" matInput [matDatepicker]="picker"
                                            placeholder="{{'Right Date' | translate}}" formControlName="variableName">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="rule.get('rightAssignment').get('dataType').value ==='Boolean'">
                                    <mat-select id="variableName" formControlName="variableName"
                                        placeholder="{{'Right Assignment' | translate}}">
                                        <mat-option value="true">{{'True' | translate}}</mat-option>
                                        <mat-option value="false">{{'False' | translate}}</mat-option>
                                    </mat-select>
                                </ng-container>
                                <mat-error *ngIf="rule.get('rightAssignment').get('variableName').errors?.required">
                                    {{'Right Assignment is required' | translate}}</mat-error>
                            </mat-form-field>
                        </ng-container>
                        <div fxLayout="row">
                            <mat-radio-group id="variableType" aria-label="Select an option"
                                formControlName="variableType" (change)="variableTypeChangeRight($event,roleIndex)">
                                <mat-radio-button value="pagefield">
                                    {{'Page field' | translate}}</mat-radio-button>
                                <mat-radio-button value="constant" style="margin-left: 10px;">
                                    {{'Constant' | translate}}</mat-radio-button>
                            </mat-radio-group>
                        </div>
                        <ng-container>
                            <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end end" style="margin-top: 8%;">
                                <mat-form-field>
                                    <mat-label>{{'Data Type' | translate}}</mat-label>
                                    <input matInput id="dataType" formControlName="dataType" readonly="true">
                                    <mat-error>
                                        {{'Data type is mismatching' | translate}}</mat-error>
                                    <mat-icon matSuffix
                                        *ngIf="rule.get('rightAssignment').get('variableType').value ==='constant'"
                                        value="constant"
                                        (click)="variableTypeChangeRight(rule.get('rightAssignment').get('variableType'),roleIndex)">
                                        create</mat-icon>
                                </mat-form-field>
                            </div>
                        </ng-container>
                    </div>
                    <button mat-mini-fab id="btnAdd" type="button" color="primary" (click)="addArray()" class="add">
                        <mat-icon>add</mat-icon>
                    </button>
                    <button id="remove" mat-mini-fab type="button" (click)="removeRules(roleIndex)"
                        *ngIf="getRulesFormArray().length>1" class="add">
                        <mat-icon>remove</mat-icon>
                    </button>
                </div>
            </div>
        </div>

    </ng-container>
    <ng-container *ngIf="taskType === 'DELAY_TIMER'">
        <div fxLayout="row" fxLayoutGap="10px">
            <div fxLayout="row" fxLayoutGap="10px">
                <mat-form-field>
                    <input matInput id="name" placeholder="{{'Name' | translate}} *" formControlName="name">
                    <mat-error>{{'Name is required' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <input matInput id="time" type="number" min="1" oninput="this.value = Math.abs(this.value)"
                        placeholder="{{'Time' | translate}} *" formControlName="time">
                    <mat-error
                        *ngIf="taskPropertyForm.get('time').errors?.required  || (taskPropertyForm.get('time').errors?.required && userForm.submitted) ">
                        {{'Time is required' | translate}}</mat-error>
                    <mat-error *ngIf="taskPropertyForm.get('time').errors?.minTime && userForm.submitted">{{'Time should
                        be above 10 minutes' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'Units' | translate}} *</mat-label>
                    <mat-select id="units" formControlName="units">
                        <!-- <mat-option value="seconds">Seconds</mat-option> -->
                        <mat-option value="minutes">{{'Minutes' | translate}}</mat-option>
                        <mat-option value="hours">{{'Hours' | translate}}</mat-option>
                    </mat-select>
                    <mat-error>{{'Units is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="taskType === 'DB_TASK'">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field>
                <input matInput id="name" placeholder="{{'Name' | translate}}" formControlName="name" required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{'DB Type' | translate}} *</mat-label>
                <mat-select id="dbType" formControlName="dbType">
                    <mat-option value="Postgres">Postgres</mat-option>
                </mat-select>
                <mat-error>{{'DB Type is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{'SQL Type' | translate}} *</mat-label>
                <mat-select id="actionType" (selectionChange)="actionTypeRead($event)" formControlName="actionType">
                    <mat-option value="select">{{'Select Statement' | translate}}</mat-option>
                    <mat-option value="insert">{{'Insert Statement' | translate}}</mat-option>
                    <mat-option value="update">{{'Update Statement' | translate}}</mat-option>
                    <mat-option value="delete">{{'Delete Statement' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'Action Type is required' | translate}}</mat-error>
            </mat-form-field>

        </div>
        <!-- <mat-card-title style="margin-top: 2%;"> Tables Selected</mat-card-title> -->
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field>
                <input matInput id="tableName" placeholder="{{'Table Name' | translate}} *" formControlName="tableName"
                    readonly="true">
                <mat-error>{{'Table Name is required' | translate}}</mat-error>
            </mat-form-field>
            <div style="padding-top: 1%">
                <mat-button-toggle-group id="selectForm">
                    <mat-button-toggle style="width: 130px;" class="split-button-1">{{'Select/Create' | translate}}
                    </mat-button-toggle>
                    <mat-button-toggle class="split-button-1 drop-down-button" [matMenuTriggerFor]="dropdownMenuOne">
                        <mat-icon>arrow_drop_down</mat-icon>
                    </mat-button-toggle>
                </mat-button-toggle-group>
                <mat-menu #dropdownMenuOne="matMenu">
                    <button mat-menu-item id="selectTable" value="select table" (click)="selectEvent()">{{'Select Table'
                        | translate}}</button>
                    <!-- <button id="createTable" *ngIf="taskPropertyForm.get('actionType').value !== '' && taskPropertyForm.get('actionType').value !== null 
                        && taskPropertyForm.get('actionType').value !== undefined" mat-menu-item id="createTable"
                        value="create table" (click)="createTable()">{{'Create Table' | translate}}</button> -->

                    <!-- <button id="editTable" *ngIf="taskPropertyForm.get('tableName').value !== '' && taskPropertyForm.get('tableName').value !== null 
                            && taskPropertyForm.get('tableName').value !== undefined" mat-menu-item id="editTable"
                        value="edit table" (click)="editTable()">{{'Edit Table' | translate}}</button> -->
                </mat-menu>
            </div>
            <mat-slide-toggle color="accent" style="padding-top: 10px;"
                *ngIf="taskPropertyForm.get('actionType').value === 'select'" formControlName="isSingleValue">
                {{'Returns single row' | translate}}
            </mat-slide-toggle>
        </div>
        <mat-divider></mat-divider>
        <ng-container *ngIf=enableQueryFields>
            <ng-container
                *ngIf="enableTableColumns && taskPropertyForm.get('actionType').value !== 'delete' && getDBTaskfieldValuesFormarray()">
                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'select'">
                    <mat-card-title style="margin-top: 3%;"> {{'Select Fields' | translate}}</mat-card-title>
                </ng-container>
                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'insert'">
                    <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 3%;">
                        <mat-card-title style="margin-top: 3%;"> {{'Insert Values' | translate}}</mat-card-title>
                        <mat-slide-toggle color="accent" formControlName="fieldType">
                            {{'Is Multiple Insert' | translate}}
                        </mat-slide-toggle>

                    </div>
                </ng-container>
                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'update'">
                    <mat-card-title style="margin-top: 3%;"> {{'Update Values' | translate}}</mat-card-title>
                </ng-container>
                <ng-container *ngIf="taskPropertyForm.get('fieldType').value === true">
                    <div fxLayout="row">
                        <mat-form-field style="width: 30%;">
                            <!-- <input placeholder="Filter Value" matInput [matAutocomplete]="autoo"
                                formControlName="filterValue">
                            <mat-autocomplete #autoo="matAutocomplete"> -->
                            <mat-label>{{'Array Field Name' | translate}}</mat-label>
                            <mat-select id="arrayFieldId" formControlName="arrayFieldId">
                                <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;"
                                    [label]="field.fieldType" [disabled]="field.disabled">
                                    <ng-container *ngFor="let value of field.fieldVO">
                                        <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                            *ngIf="value.datatype === 'array'">
                                            {{value.fieldName}}</mat-option>
                                    </ng-container>
                                </mat-optgroup>
                            </mat-select>
                            <!-- </mat-autocomplete> -->
                        </mat-form-field>
                    </div>
                </ng-container>
                <ng-container *ngIf="getDBTaskfieldValuesFormarray()">
                    <div formArrayName="fieldValues"
                        *ngFor="let rule of getDBTaskfieldValuesFormarray().controls; let i = index"
                        style="margin-bottom: 2%;">
                        <div [formGroupName]="i">
                            <div fxLayout="row" fxLayoutGap="10px">
                                <!-- <ng-container *ngIf="taskPropertyForm.get('fieldType').value !== true">                                           -->

                                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'select'">
                                    <mat-form-field style="width: 40%;">
                                        <mat-label>{{'Add Fields' | translate}}</mat-label>
                                        <mat-select id="fieldName" formControlName="fieldName"
                                            (selectionChange)="setFieldNameError(i)">
                                            <!-- <ng-container *ngFor="let name of tableNames">(selectionChange)="setFieldNameError(i)" -->
                                            <mat-option *ngFor="let column of columnValues[tableName]"
                                                value="{{column.columnIdentifier}}"
                                                (onSelectionChange)="setFieldName($event,tableName,i,column )">
                                                {{column.columnName}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="rule.get('fieldName').errors?.req">
                                            {{'Field Name is required' | translate}}</mat-error>
                                        <mat-error *ngIf="rule.get('fieldName').errors?.unique">
                                            {{'Field Name should be unique' | translate}}</mat-error>
                                    </mat-form-field>
                                </ng-container>
                                <ng-container *ngIf="taskPropertyForm.get('actionType').value !== 'select'">
                                    <mat-form-field>
                                        <input matInput id="fieldName" placeholder="{{'Field Name' | translate}}"
                                            formControlName="fieldName" readonly="true">
                                    </mat-form-field>
                                </ng-container>
                                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'select'">
                                    <mat-form-field style="width: 40%;">
                                        <input matInput id="aliasName" placeholder="{{'Alias Name' | translate}}"
                                            (focusout)="setAliasName(i)" formControlName="aliasName">
                                    </mat-form-field>
                                </ng-container>
                                <ng-container *ngIf="taskPropertyForm.get('actionType').value !== 'select'">
                                    <div fxLayout="column">
                                        <ng-container>
                                            <!-- *ngIf="rule.get('dataType').value === 'string'" -->
                                            <mat-form-field>
                                                <input matInput id="insertValue" type="text"
                                                    placeholder="{{'Value' | translate}}"
                                                    [value]="changeInsertValue(rule.value,rule.get('insertValue').value, rule.get('insertFieldVariableType').value)"
                                                    (focusout)="setInsertValue($event,i)">
                                                <mat-error>
                                                    {{rule.get('fieldName').value}} {{'value is required' | translate}}
                                                </mat-error>
                                            </mat-form-field>
                                            <button mat-icon-button [matMenuTriggerFor]="menu5" style="margin-top: -30%;
                                            margin-left: 80%;" type="button" #menuTrigger5="matMenuTrigger"
                                                class="float-right" aria-label="Example icon-button with a menu"
                                                (mousedown)="mousedownEvent(rule.value,i,'','dbTaskInsertValue')">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                        </ng-container>
                                        <!-- <ng-container
                                            *ngIf="(rule.get('dataType').value === 'long' || rule.get('dataType').value === 'double' ||
                                                 rule.get('dataType').value === 'int' || rule.get('dataType').value === 'float')">
                                            <mat-form-field>
                                                <input matInput id="insertValue" type="number" placeholder="Value"
                                                    formControlName="insertValue" (focusout)="setInsertValue($event,i)">
                                                <mat-error>
                                                    {{rule.get('fieldName').value}} value is required</mat-error>
                                            </mat-form-field>
                                        </ng-container> -->
                                        <!-- <ng-container
                                            *ngIf="(rule.get('dataType').value === 'date' || rule.get('dataType').value === 'timestamp')">
                                            <mat-form-field>
                                                <input matInput id="insertValue" [matDatepicker]="picker"
                                                    formControlName="insertValue" placeholder="Date"
                                                    (dateChange)="setInsertValue($event,i)">
                                                <mat-datepicker-toggle matSuffix [for]="picker">
                                                </mat-datepicker-toggle>
                                                <mat-datepicker #picker></mat-datepicker> -->
                                        <!-- <input matInput placeholder="Right Assignment" [type]="number"
                                        formControlName="variableName"
                                        (focusout)="checkUniqueValidationForComputeTask(i)"> -->
                                        <!-- <mat-error>{{rule.get('fieldName').value}} value is required
                                                </mat-error> -->
                                        <!-- <mat-error *ngIf="rule.get('variableName').errors?.unique">Already Selected
                                    </mat-error> -->
                                        <!-- </mat-form-field>
                                        </ng-container> -->

                                        <!-- <ng-container
                                            *ngIf="rule.get('insertFieldVariableType').value === 'pageFields'">
                                            <mat-form-field> -->
                                        <!-- <input placeholder="Value" matInput [matAutocomplete]="autoo"
                                                        formControlName="insertValue"
                                                        (change)="setInsertValue($event,i)">
                                                    <mat-autocomplete #autoo="matAutocomplete"> -->
                                        <!-- <mat-label>Value</mat-label>
                                                <mat-select id="insertValue" formControlName="insertValue"> -->
                                        <!-- <ng-container *ngFor="let value of initialFieldList"> -->
                                        <!-- <mat-optgroup *ngFor="let field of initialFieldList"
                                                        style="font-weight: bold;" [label]="field.fieldType"
                                                        [disabled]="field.disabled">
                                                        <mat-option [matTooltip]="value.fieldName"
                                                            [value]="value.fieldId" *ngFor="let value of field.fieldVO">
                                                            {{value.fieldName}}</mat-option>
                                                    </mat-optgroup> -->
                                        <!-- </ng-container> -->
                                        <!-- </mat-select> -->
                                        <!-- </mat-autocomplete> -->
                                        <!-- <mat-error>
                                                    {{rule.get('fieldName').value}} value is required</mat-error>
                                            </mat-form-field>
                                        </ng-container> -->
                                        <!-- <mat-radio-group aria-label="Select an option" id="insertFieldVariableType"
                                            formControlName="insertFieldVariableType" style="width: 45%;">
                                            <div fxLayout="row" fxLayoutGap="5px">
                                                <mat-radio-button value="pageFields">
                                                    Page
                                                    Field
                                                </mat-radio-button>
                                                <mat-radio-button value="constants">
                                                    Constant
                                                </mat-radio-button> -->
                                        <!-- </div>
                                        </mat-radio-group> -->
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'select'">
                                    <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                        class="add" (click)="addDBTaskFieldValuesFormGroup(i)" style="margin-top: 15px;"
                                        [disabled]="rule.get('fieldName').value === '' || duplicateFields ||
                                            getDBTaskfieldValuesFormarray().length === columnValuesLength">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                    <button mat-mini-fab class="icon" type="button" class="add" id="remove"
                                        (click)="removeFieldValues(i)" style="margin-top: 15px;">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                </ng-container>
                                <ng-container *ngIf="taskPropertyForm.get('actionType').value !== 'select'">
                                    <button mat-mini-fab class="icon" type="button" class="add" id="remove"
                                        (click)="removeInsertUpdateFieldValues(i,rule.get('isRequired').value)"
                                        style="margin-top: 15px;"
                                        [disabled]="getDBTaskfieldValuesFormarray().length===1">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                </ng-container>
                                <!-- </ng-container> -->
                            </div>
                        </div>
                    </div>
                </ng-container>
                <mat-divider></mat-divider>
            </ng-container>
            <ng-container
                *ngIf="getDBTaskwhereClauseFormarray() && (taskPropertyForm.get('actionType').value !== 'insert')">
                <mat-card-title style="margin-top: 3%;"> Where Clause</mat-card-title>
                <div formArrayName="whereClause"
                    *ngFor="let rules of getDBTaskwhereClauseFormarray().controls; let iw = index"
                    style="margin-bottom: 2%;">
                    <div [formGroupName]="iw">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <ng-container>
                                <mat-form-field style="width: 10%;">
                                    <mat-label>{{'Condition' | translate}}</mat-label>
                                    <mat-select id="filterCondition" formControlName="filterCondition">
                                        <mat-option value="AND" (onSelectionChange)="filterCondition($event,iw)">AND
                                        </mat-option>
                                        <mat-option value="OR" (onSelectionChange)="filterCondition($event,iw)">OR
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </ng-container>
                            <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                (click)="addDBTaskWhereClauseFormGroup()" class="add" style="margin-top: 15px;">
                                <mat-icon>add</mat-icon>
                            </button>
                            <button mat-mini-fab id="remove" class="icon" type="button" (click)="removeWhereClause(iw)"
                                class="add" style="margin-top: 15px;">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </div>
                        <div formArrayName="filtersInsideCondition"
                            *ngFor="let rule of rules['controls'].filtersInsideCondition['controls']; let i = index">
                            <div [formGroupName]="i">
                                <div fxLayout="row" fxLayoutGap="10px">
                                    <mat-form-field fxFlexOffset="10" style="width: 35%;">
                                        <mat-label>{{'Select Filter Field' | translate}}</mat-label>
                                        <mat-select id="filterName" formControlName="filterName">
                                            <mat-option *ngFor="let column of columnValues[tableName]"
                                                value="{{column.columnIdentifier}}"
                                                (onSelectionChange)="orderFilterName($event,column.dataType,tableName,i, iw ,rule.get('filterFieldVariableType').value)">
                                                {{column.columnName}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="rule.get('filterName').errors?.req && userForm.submitted">
                                            {{'Filter Name is required' | translate}}</mat-error>
                                    </mat-form-field>
                                    <mat-form-field style="width: 25%;">
                                        <mat-label>{{'Filter Operator' | translate}}</mat-label>
                                        <mat-select id="filterOperator" formControlName="filterOperator">
                                            <mat-option *ngFor="let operator of filterOperator" [value]="operator.value"
                                                (onSelectionChange)="orderfilterOperator($event, i, iw)">
                                                {{operator.description}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="rule.get('filterOperator').errors?.req && userForm.submitted">
                                            {{'Filter Operator is required' | translate}}</mat-error>
                                    </mat-form-field>
                                    <ng-container>
                                        <!-- *ngIf="rule.get('filterFieldVariableType').value === 'constants'" -->
                                        <mat-form-field style="width: 40%;">
                                            <input matInput id="filterValue"
                                                placeholder="{{'Filter Value' | translate}}"
                                                formControlName="filterValue" (focusout)="orderFilterValue(i, iw)"
                                                readonly>
                                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                                #menuTrigger5="matMenuTrigger" class="float-right"
                                                aria-label="Example icon-button with a menu" style="margin-top: -19%;"
                                                (mousedown)="mousedownEvent(rule.value,i,iw,'dbTaskFilterValue')">
                                                <mat-icon style="margin-top: 53%;">more_vert</mat-icon>
                                            </button>
                                            <mat-error
                                                *ngIf="rule.get('filterValue').errors?.req && userForm.submitted">
                                                {{'Fields is required' | translate}}</mat-error>
                                        </mat-form-field>
                                    </ng-container>
                                    <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                        (click)="addDBTaskFiltersInsideConditionFormGroup(i,iw)" class="add"
                                        style="margin-top: 15px;"
                                        [disabled]="rule.get('filterName').value === '' || rule.get('filterOperator').value === '' || rule.get('filterValue').value === ''">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                    <button mat-mini-fab class="icon" type="button" id="remove"
                                        (click)="removeFiltersInsideCondition(i,iw)" class="add"
                                        style="margin-top: 15px;">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <mat-divider></mat-divider>
            <ng-container *ngIf="getDBTasksortByFormarray() && taskPropertyForm.get('actionType').value === 'select'">
                <mat-card-title style="margin-top: 3%;"> Select Sort</mat-card-title>
                <div formArrayName="sortBy" *ngFor="let rule of getDBTasksortByFormarray().controls; let i = index">
                    <div [formGroupName]="i">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <mat-form-field style="width: 35%;">
                                <mat-label>{{'Order Fields' | translate}}</mat-label>
                                <mat-select id="orderFieldName" formControlName="orderFieldName">
                                    <mat-option *ngFor="let column of columnValues[tableName]"
                                        value="{{column.columnIdentifier}}"
                                        (onSelectionChange)="orderFieldName($event, tableName,i)">
                                        {{column.columnName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="rule.get('orderFieldName').errors?.req && userForm.submitted">
                                    {{'Order Field Value is required' | translate}}</mat-error>
                                <mat-error *ngIf="rule.get('orderFieldName').errors?.unique">
                                    {{'Order Field should be unique' | translate}}</mat-error>
                            </mat-form-field>
                            <mat-form-field style="width: 20%;">
                                <mat-label>{{'Asc/Desc' | translate}}</mat-label>
                                <mat-select id="orderCondition" formControlName="orderCondition">
                                    <mat-option value="Asc" (onSelectionChange)="orderDirection($event,i)">{{'Asc' |
                                        translate}}
                                    </mat-option>
                                    <mat-option value="Desc" (onSelectionChange)="orderDirection($event,i)">{{'Desc' |
                                        translate}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="rule.get('orderCondition').errors?.req && userForm.submitted">
                                    {{'Order Condition is required' | translate}}</mat-error>
                            </mat-form-field>
                            <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                (click)="addDBTasksortByFormGroup(i)" class="add" style="margin-top: 15px;" [disabled]="rule.get('orderFieldName').value === '' || rule.get('orderCondition').value === ''
                                    || getDBTasksortByFormarray().length === columnValuesLength">
                                <mat-icon>add</mat-icon>
                            </button>
                            <button mat-mini-fab id="remove" class="icon" type="button" (click)="removeSortBy(i)"
                                class="add" style="margin-top: 15px;">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </ng-container>
            <mat-divider></mat-divider>
            <ng-container *ngIf="taskPropertyForm.get('actionType').value === 'select'">
                <mat-card-title style="margin-top: 2%;"> {{'Select Limit' | translate}}</mat-card-title>
                <div fxLayout="row">
                    <mat-form-field>
                        <input matInput id="limit" placeholder="{{'Query Limit' | translate}}" type="number" min="0"
                            max="1000" oninput="this.value = Math.abs(this.value)" (focusout)="setQueryLimit()"
                            formControlName="limit">
                        <mat-error>{{'Please enter Query Limit between 0 and 1000' | translate}}</mat-error>
                    </mat-form-field>
                </div>
            </ng-container>
            <mat-divider></mat-divider>
        </ng-container>
    </ng-container>
    <ng-container *ngIf="taskType === 'COMPUTE_TASK'">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field>
                <input matInput id="name" placeholder="{{'Name' | translate}}" formControlName="name" required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-select id="dataType" formControlName="dataType" placeholder="{{'Data Type' | translate}} *"
                    (selectionChange)="computeTaskDataTypeValidation($event)">
                    <mat-option value="float">{{'Number' | translate}}</mat-option>
                    <mat-option value="date">{{'Date' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'Data Type is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-select id="operator" formControlName="operator" placeholder="{{'Operator' | translate}} *"
                    (selectionChange)="buildValueFromOperator($event)">
                    <mat-option value="add">{{'Addition' | translate}}</mat-option>
                    <mat-option value="subtraction">{{'Subtraction' | translate}}</mat-option>
                    <mat-option value="between" *ngIf="taskPropertyForm.get('dataType').value ==='date'">{{'Between' |
                        translate}}
                    </mat-option>
                    <ng-container *ngIf="taskPropertyForm.get('dataType').value !=='date'">
                        <mat-option value="multiplication">{{'Multiplication' | translate}}</mat-option>
                        <mat-option value="division">{{'Division' | translate}}</mat-option>
                        <mat-option value="modulo">{{'Modulus' | translate}}</mat-option>

                    </ng-container>
                </mat-select>
                <mat-error>{{'Operator is required' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="10px">
            <div fxLayout="column">
                <mat-form-field>
                    <input matInput id="leftAssignment" placeholder="{{'Assign to Variable' | translate}} *" type="text"
                        formControlName="leftAssignment" (focusout)="buidComputeTaskValue()">
                    <mat-error>{{'Assign to Variable is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="column" *ngIf="taskPropertyForm.get('dataType').value">
                <span style="margin-top: 15px;font-size: 30px;"> =</span>
            </div>
            <div fxLayout="column">
                <div formArrayName="rightAssignment"
                    *ngFor="let rule of getComputeTaskRightAssignmentFormarray().controls; let i = index">
                    <div [formGroupName]="i" fxLayout="row" fxLayoutGap="5px" style="margin-top: 2%;">
                        <div fxLayout="column">
                            <mat-form-field
                                *ngIf="taskPropertyForm.get('dataType').value ==='number' || taskPropertyForm.get('dataType').value ==='float'">

                                <input matInput id="variableName" placeholder="{{'Number' | translate}}"
                                    formControlName="variableName" (focusout)="checkUniqueValidationForComputeTask(i)"
                                    readonly>
                                <button mat-icon-button [matMenuTriggerFor]="menu5" style="margin-top: -30%;
                                            margin-left: 80%;" type="button"
                                    [disabled]="!taskPropertyForm.get('leftAssignment').value"
                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                    aria-label="Example icon-button with a menu" style="margin-top: -22%;"
                                    (mousedown)="mousedownEvent(taskPropertyForm.get('dataType').value,i,'','computeTaskVariable')">
                                    <mat-icon style="margin-top: 53%;">more_vert</mat-icon>
                                </button>
                                <mat-error *ngIf="rule.get('variableName').errors?.required">{{'Number is required' |
                                    translate}}
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="taskPropertyForm.get('dataType').value ==='date'
                                    && taskPropertyForm.get('operator').value !=='between'
                                    && i===0">
                                <input matInput id="variableName" formControlName="variableName"
                                    placeholder="{{'Date' | translate}}" [value]="changeDatatypeValue(taskPropertyForm.get('dataType').value,
                                    rule.get('variableName').value, rule.get('variableType').value)" readonly>
                                <button mat-icon-button [matMenuTriggerFor]="menu5" style="margin-top: -30%;
                                            margin-left: 80%;" type="button"
                                    [disabled]="!taskPropertyForm.get('leftAssignment').value"
                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                    aria-label="Example icon-button with a menu" style="margin-top: -22%;"
                                    (mousedown)="mousedownEvent(taskPropertyForm.get('dataType').value,i,'','computeTaskVariable')">
                                    <mat-icon style="margin-top: 53%;">more_vert</mat-icon>
                                </button>
                                <mat-error *ngIf="rule.get('variableName').errors?.required">{{'Date is required' |
                                    translate}}
                                </mat-error>
                                <mat-error *ngIf="rule.get('variableName').errors?.unique">{{'Already Selected' |
                                    translate}}
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="taskPropertyForm.get('dataType').value ==='date' 
                                    && taskPropertyForm.get('operator').value !=='between'
                                    && i===1">
                                <input matInput id="variableName" placeholder="{{'Number of Days' | translate}}"
                                    type="number" formControlName="variableName"
                                    (focusout)="checkUniqueValidationForComputeTask(i)">
                                <button mat-icon-button [matMenuTriggerFor]="menu5" style="margin-top: -30%;
                                            margin-left: 80%;" type="button"
                                    [disabled]="!taskPropertyForm.get('leftAssignment').value"
                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                    aria-label="Example icon-button with a menu" style="margin-top: -22%;"
                                    (mousedown)="mousedownEvent('number',i,'','computeTaskVariable')">
                                    <mat-icon style="margin-top: 53%;">more_vert</mat-icon>
                                </button>
                                <mat-error *ngIf="rule.get('variableName').errors?.required">{{'Number of Days is
                                    required' | translate}}</mat-error>
                                <mat-error *ngIf="rule.get('variableName').errors?.unique">{{'Already Selected' |
                                    translate}}
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field *ngIf="taskPropertyForm.get('dataType').value ==='date'&& 
                                taskPropertyForm.get('operator').value ==='between' ">
                                <mat-label>{{'Choose a date' | translate}}</mat-label>
                                <input matInput id="variableName" formControlName="variableName" [value]="changeDatatypeValue(taskPropertyForm.get('dataType').value,
                                    rule.get('variableName').value, rule.get('variableType').value)">
                                <button mat-icon-button [matMenuTriggerFor]="menu5" style="margin-top: -30%;
                                            margin-left: 80%;" type="button"
                                    [disabled]="!taskPropertyForm.get('leftAssignment').value"
                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                    aria-label="Example icon-button with a menu" style="margin-top: -22%;"
                                    (mousedown)="mousedownEvent(taskPropertyForm.get('dataType').value,i,'','computeTaskVariable')">
                                    <mat-icon style="margin-top: 53%;">more_vert</mat-icon>
                                </button>
                            </mat-form-field>
                        </div>
                        <div fxLayout="column"
                            *ngIf="computeTaskValidationWithFormArray() && taskPropertyForm.get('leftAssignment').value">
                            <button mat-mini-fab class="icon" type="button" color="primary" id="btnAdd"
                                (click)="addComputeRightArray()" style="margin-top: 15px;">
                                <mat-icon>add</mat-icon>
                            </button>
                        </div>
                        <div fxLayout="column" *ngIf="getComputeTaskRightAssignmentFormarray().length>1 && computeTaskValidationWithFormArray() &&
                                 taskPropertyForm.get('leftAssignment').value">
                            <button mat-mini-fab class="icon" type="button" color="accent" id="remove"
                                (click)="removeComputeTaskRightAssignment(i,rule)" style="margin-top: 15px;">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div fxLayout="row">
            <mat-form-field style="width: 100%;">
                <textarea matInput placeholder="{{'Value' | translate}}" id="value" formControlName="value"
                    readonly="true" rows="3"></textarea>
            </mat-form-field>
        </div>
    </ng-container>
    <ng-container *ngIf="taskType === 'WEB_SERVICE_TASK'">
        <div fxLayout="row" fxLayoutGap="20px" style="width: 100%;">
            <mat-form-field style="width: 50%;">
                <input matInput placeholder="{{'Name' | translate}}" id="name" formControlName="name" required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 50%;">
                <mat-select id="httpMethod" formControlName="httpMethod" placeholder="{{'HTTP Method' | translate}} *"
                    (selectionChange)="setValidationForWebsServiceTask($event)">
                    <mat-option value="GET">GET</mat-option>
                    <mat-option value="POST">POST</mat-option>
                    <mat-option value="PUT">PUT</mat-option>
                </mat-select>
                <mat-error>{{'HTTP Method is required' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field style="width: 100%;">
                <input matInput id="remoteUrl" placeholder="{{'Remote Url' | translate}} *" type="text"
                    formControlName="remoteUrl">
                <mat-error *ngIf="taskPropertyForm.get('remoteUrl').errors?.required">{{'Remote Url is required' |
                    translate}}
                </mat-error>
                <mat-error *ngIf="taskPropertyForm.get('remoteUrl').errors?.pattern">{{'Invalid Url' | translate}}
                </mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutGap="20px" style="width: 100%;">
            <mat-form-field>
                <mat-select id="contentType" formControlName="contentType"
                    placeholder="{{'Content Type' | translate}} *">
                    <mat-option value="text/plain">{{'text/plain' | translate}}</mat-option>
                    <mat-option value="application/json">{{'application/json' | translate}}</mat-option>
                    <mat-option value="image/jpeg">{{'image/jpeg' | translate}}</mat-option>
                    <mat-option value="image/jpeg">{{'multipart/formdata' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'Content Type is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 25%;">
                <input matInput id="connectionTimeout" placeholder="{{'Connection Timeout' | translate}}" type="number"
                    min="1" oninput="this.value = Math.abs(this.value)" formControlName="connectionTimeout">
                <span matSuffix>{{'seconds' | translate}}</span>
            </mat-form-field>
            <mat-form-field style="width: 25%;">
                <input matInput id="readTimeout" placeholder="{{'Read Timeout' | translate}}" type="number" min="1"
                    oninput="this.value = Math.abs(this.value)" formControlName="readTimeout">
                <span matSuffix>{{'seconds' | translate}}</span>
            </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutGap="20px" style="width: 100%;">
            <mat-form-field style="width: 25%;">
                <input matInput id="retryCount" placeholder="{{'Max Retry Count' | translate}}" type="number" min="1"
                    oninput="this.value = Math.abs(this.value)" (focusout)="setErrorsForRetryCount()"
                    formControlName="retryCount">
                <mat-error *ngIf="taskPropertyForm.get('retryCount').errors?.retryCountRequired">{{'Retry Count is
                    required' | translate}}</mat-error>
                <mat-error *ngIf="taskPropertyForm.get('retryCount').errors?.minRetryCountRequired">{{'Retry count
                    should be above 1' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 25%;">
                <input matInput id="retryTime" placeholder="{{'Retry Time' | translate}}" type="number" min="1"
                    oninput="this.value = Math.abs(this.value)" (focusout)="setErrorsForRetryCount()"
                    formControlName="retryTime">
                <mat-error *ngIf="taskPropertyForm.get('retryTime').errors?.retryTimeRequired">{{'Retry Time is
                    required' | translate}}</mat-error>
                <mat-error *ngIf="taskPropertyForm.get('retryTime').errors?.minRetryTimeRequired">{{'Retry time should
                    be above 1 minute' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{'Units' | translate}}</mat-label>
                <mat-select id="retryUnits" formControlName="retryUnits" (selectionChange)="setErrorsForRetryCount()">
                    <mat-option value="minutes">{{'Minutes' | translate}}</mat-option>
                    <mat-option value="hours">{{'Hours' | translate}}</mat-option>
                </mat-select>
                <mat-error *ngIf="taskPropertyForm.get('retryUnits').errors?.retryUnitsRequired">{{'Retry Units is
                    required' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <mat-card style="background-color: rgba(220, 240, 241, 0.904)">
            <mat-tab-group>
                <mat-tab label="Authentication">
                    <br>
                    <div fxLayout="row" fxLayoutGap="35px" style="margin-top: 1%;">
                        <div>
                            <mat-form-field>
                                <mat-select id="authorization" placeholder="{{'Type' | translate}}"
                                    (selectionChange)="configureAuthorizationFormGroups($event)"
                                    formControlName="authorization">
                                    <mat-option value="noAuth">{{'No Auth' | translate}}</mat-option>
                                    <mat-option value="apiKey">{{'API Key' | translate}}</mat-option>
                                    <mat-option value="bearerToken">{{'Bearer Token' | translate}}</mat-option>
                                    <mat-option value="basicAuth">{{'Basic Auth' | translate}}</mat-option>
                                </mat-select>
                                <mat-error>{{'HTTP Method is required' | translate}}</mat-error>
                            </mat-form-field>
                        </div>
                        <ng-container *ngIf="taskPropertyForm.get('authorization').value === 'bearerToken'">
                            <div fxLayout="column" style="width: 47%;" fxLayoutGap="19px">
                                <ng-container formGroupName="bearerToken">
                                    <ng-container>
                                        <mat-form-field style="margin-top:-4%;">
                                            <input matInput id="token" placeholder="{{'Token' | translate}}" type="text"
                                                formControlName="token" readonly>
                                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button" style="margin-top: -12%;
                                        margin-left: 92%;" #menuTrigger5="matMenuTrigger" class="float-right"
                                                aria-label="Example icon-button with a menu"
                                                (mousedown)="mousedownEvent('',i,'','bearerToken')">
                                                <mat-icon style="margin-top:53%;">more_vert</mat-icon>
                                            </button>
                                        </mat-form-field>

                                    </ng-container>
                                </ng-container>
                                <div fxLayout="row">
                                    <mat-error class="web-service-error"
                                        *ngIf="taskPropertyForm.get('bearerToken').get('token').errors?.required && userForm.submitted">
                                        [{{'Token' | translate}}]&nbsp;</mat-error>
                                    <mat-error class="web-service-error"
                                        *ngIf="taskPropertyForm.get('bearerToken').invalid && userForm.submitted">
                                        &nbsp;{{'is required' | translate}}</mat-error>
                                </div>
                            </div>


                        </ng-container>
                        <ng-container *ngIf="taskPropertyForm.get('authorization').value === 'basicAuth'">
                            <div fxLayout="column" fxLayoutGap="30px">
                                <span>{{'Username' | translate}}</span>
                                <span>{{'Password' | translate}}</span>
                            </div>
                            <div fxLayout="column" style="width: 47%;" fxLayoutGap="19px">
                                <ng-container formGroupName="basicAuth">
                                    <input matInput id="userName" placeholder="{{'Username' | translate}}" type="text"
                                        formControlName="userName" class="webservice-border">
                                    <div fxLayout="row" class="webservice-border" style="width: 100%;">
                                        <input matInput id="password" placeholder="{{'Password' | translate}}"
                                            [type]="hide ? 'password' : 'text'" formControlName="password">
                                        <mat-icon (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                                            style="cursor: pointer;margin-top: 7px;height: 18px;"
                                            [attr.aria-pressed]="hide">{{hide ? 'visibility_off' : 'visibility'}}
                                        </mat-icon>
                                    </div>
                                </ng-container>
                                <div fxLayout="row">
                                    <mat-error class="web-service-error"
                                        *ngIf="taskPropertyForm.get('basicAuth').get('userName').errors?.required && userForm.submitted">
                                        [{{'Username' | translate}}]&nbsp;</mat-error>
                                    <mat-error class="web-service-error"
                                        *ngIf="taskPropertyForm.get('basicAuth').get('password').errors?.required && userForm.submitted">
                                        [{{'Password' | translate}}]&nbsp;</mat-error>
                                    <mat-error class="web-service-error"
                                        *ngIf="taskPropertyForm.get('basicAuth').invalid && userForm.submitted">
                                        &nbsp;{{'is required' | translate}}</mat-error>
                                </div>
                            </div>
                        </ng-container>
                    </div>

                    <ng-container *ngIf="taskPropertyForm.get('authorization').value === 'apiKey'">
                        <ng-container formGroupName="apiKey">
                            <div formArrayName="apiKey" *ngFor="let api of getApiKeyFormArray().controls; let i= index">
                                <div [formGroupName]="i">
                                    <div fxLayout="row" style="margin-top: 1%;">
                                        <div fxLayout="row" style="width: 90%;" fxLayoutGap="10px">
                                            <div fxLayout="column" style="width:100%">
                                                <input matInput id="key" placeholder="{{'Key' | translate}}" type="text"
                                                    formControlName="key" class="api-border"
                                                    (focusout)="setErrorsForapiKey(api)">
                                                <mat-error style="font-size: 12px;margin: 2%;"
                                                    *ngIf="api.get('key').errors?.keyReq">{{'Key is required' |
                                                    translate}}
                                                </mat-error>
                                            </div>
                                            <div fxLayout="column" style="width:100%">
                                                <input matInput id="value" placeholder="{{'Value' | translate}}"
                                                    type="text" formControlName="value" class="api-border"
                                                    (focusout)="setErrorsForapiKey(api)" readonly>

                                                <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                                    style="margin-top: -20%; margin-left: 68%;"
                                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                                    aria-label="Example icon-button with a menu"
                                                    (mousedown)="mousedownEvent('',i,'','apiKey')">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-error style="font-size: 12px;margin: 2%;"
                                                    *ngIf="api.get('value').errors?.valueReq">{{'Value is required' |
                                                    translate}}
                                                </mat-error>
                                            </div>
                                            <div fxLayout="column" style="width:100%">
                                                <mat-select placeholder="{{'Add To' | translate}}"
                                                    formControlName="addTo" id="addTo" class="api-border"
                                                    (selectionChange)="setErrorsForapiKey(api)">
                                                    <mat-option value="Header">{{'Header' | translate}}</mat-option>
                                                    <mat-option value="Query Params">{{'Query Params' | translate}}
                                                    </mat-option>
                                                </mat-select>
                                                <mat-error style="font-size: 12px;margin: 2%;"
                                                    *ngIf="api.get('addTo').errors?.addToReq">{{'Add To is required' |
                                                    translate}}
                                                </mat-error>
                                            </div>
                                            <button mat-mini-fab id="btnAdd" class="add" type="button" color="primary"
                                                (click)="addApiKeyFormGroupToArray()">
                                                <mat-icon style="font-size: 16px;margin-bottom: 2px;font-weight: bold;">
                                                    add
                                                </mat-icon>
                                            </button>
                                            <button class="add" mat-mini-fab color="accent" id="remove"
                                                (click)="removeApiKeyFormGroupFromArray(i)">
                                                <mat-icon style="font-size: 16px;margin-bottom: 2px;font-weight: bold;">
                                                    remove
                                                </mat-icon>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </ng-container>

                    </ng-container>
                </mat-tab>
                <mat-tab label="Custom headers">
                    <br>
                    <div fxLayout="row" fxLayoutGap="265px">
                        <span>{{'Key' | translate}}</span>
                        <span>{{'Value' | translate}}</span>
                    </div>
                    <br>
                    <div formArrayName="customHeaders" style="margin-top: 2%;"
                        *ngFor="let header of getCustomHeadersFormArray('customHeaders').controls; let i = index">
                        <div [formGroupName]="i" fxLayout="row" fxLayoutGap="40px">
                            <div fxLayout="column" style="width:40%">
                                <input matInput id="key" placeholder="{{'Key' | translate}}" type="text"
                                    formControlName="key" class="webservice-border"
                                    (focusout)="setErrorsForValue(header,header.get('value'))">
                                <mat-error style="font-size: 12px;margin: 2%;"
                                    *ngIf="header.get('key').errors?.keyRequired">{{'Key is required' | translate}}
                                </mat-error>
                            </div>
                            <div fxLayout="row" fxLayoutGap="20px" style="width:50%;margin-top: -2%;">
                                <div fxLayout="column" fxLayoutGap="6px">
                                    <ng-container>
                                        <div>
                                            <input matInput placeholder="{{'Value' | translate}}" type="text"
                                                formControlName="value"
                                                (focusout)="setErrorsForKey(header,header.get('key'))" readonly
                                                class="webservice-border">
                                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button" style="margin-top: -23%;
                                        margin-left: 88%;" #menuTrigger5="matMenuTrigger" class="float-right"
                                                aria-label="Example icon-button with a menu"
                                                (mousedown)="mousedownEvent('',i,'','customHeaders')">
                                                <mat-icon style="margin-top: 56%;
                                                margin-left: 63%;">more_vert</mat-icon>
                                            </button>
                                        </div>
                                        <mat-error style="font-size: 12px;margin: 2%;"
                                            *ngIf="header.get('value').errors?.valueRequired">{{'Value is required' |
                                            translate}}
                                        </mat-error>
                                    </ng-container>
                                </div>
                                <div fxLayout="row" fxLayoutGap="10px">
                                    <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                        (click)="addCustomHeadersArray('customHeaders')">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                    <button mat-mini-fab class="icon" type="button" color="accent" id="remove"
                                        (click)="removeCustomHeaders(i,'customHeaders')">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab label="Query Params">
                    <br>
                    <div fxLayout="row" fxLayoutGap="265px">
                        <span>{{'Key' | translate}}</span>
                        <span>{{'Value' | translate}}</span>
                    </div>
                    <br>
                    <div formArrayName="queryParams" style="margin-top: 2%;"
                        *ngFor="let header of getCustomHeadersFormArray('queryParams').controls; let i = index">
                        <div [formGroupName]="i" fxLayout="row" fxLayoutGap="40px">
                            <div fxLayout="column" style="width:40%">
                                <input matInput id="key" placeholder="{{'Key' | translate}}" type="text"
                                    formControlName="key" class="webservice-border"
                                    (focusout)="setErrorsForValue(header,header.get('value'))">
                                <mat-error style="font-size: 12px;margin: 2%;"
                                    *ngIf="header.get('key').errors?.keyRequired">{{'Key is required' | translate}}
                                </mat-error>
                            </div>
                            <div fxLayout="row" fxLayoutGap="20px" style="width:50%;margin-top: -2%;">
                                <div fxLayout="column" fxLayoutGap="6px">
                                    <ng-container>
                                        <div>
                                            <input matInput placeholder="{{'Value' | translate}}" type="text"
                                                formControlName="value"
                                                (focusout)="setErrorsForKey(header,header.get('key'))"
                                                class="webservice-border" readonly>
                                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button" style="margin-top: -23%;
                                        margin-left: 88%;" #menuTrigger5="matMenuTrigger" class="float-right"
                                                aria-label="Example icon-button with a menu"
                                                (mousedown)="mousedownEvent('',i,'','queryParams')">
                                                <mat-icon style="margin-top: 56%;
                                                margin-left: 63%;">more_vert</mat-icon>
                                            </button>
                                        </div>>

                                        <mat-error style="font-size: 12px;margin: 2%;"
                                            *ngIf="header.get('value').errors?.valueRequired">{{'Value is required' |
                                            translate}}
                                        </mat-error>
                                    </ng-container>
                                </div>
                                <div fxLayout="row" fxLayoutGap="10px">
                                    <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                        (click)="addCustomHeadersArray('queryParams')">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                    <button mat-mini-fab class="icon" type="button" color="accent" id="remove"
                                        (click)="removeCustomHeaders(i,'queryParams')">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </mat-card>
        <div style="margin-top: 2%;">
            <ng-container *ngIf="taskPropertyForm.get('httpMethod').value ==='POST' ||
            taskPropertyForm.get('httpMethod').value ==='PUT'">
                <mat-label style="font-weight: 500; margin-top: 2%;">{{'Request Payload' | translate}}</mat-label>
                <div formArrayName="webServiceRequestPayload" style="margin: 1%;"
                    *ngFor="let header of getCustomHeadersFormArray('webServiceRequestPayload').controls; let i = index">
                    <div [formGroupName]="i" fxLayout="row" fxLayoutGap="40px">
                        <div fxLayout="column" style="width:40%">
                            <input matInput id="key" placeholder="{{'Key' | translate}}" type="text"
                                formControlName="key" class="webservice-border"
                                (focusout)="setErrorsForValue(header,header.get('value'))">
                            <mat-error style="font-size: 12px;margin: 2%;"
                                *ngIf="header.get('key').errors?.keyRequired">{{'Key is required' | translate}}
                            </mat-error>
                        </div>
                        <div fxLayout="row" fxLayoutGap="20px" style="width:50%; margin-top: -2%;">
                            <div fxLayout="column" fxLayoutGap="6px" style="width:100%">
                                <ng-container>
                                    <div>
                                        <input matInput id="value" placeholder="{{'Value' | translate}}" type="text"
                                            formControlName="value" class="webservice-border"
                                            (focusout)="setErrorsForKey(header,header.get('key'))">
                                        <button mat-icon-button [matMenuTriggerFor]="menu5" type="button" style="margin-top: -12%;
                                    margin-left: 92%;" #menuTrigger5="matMenuTrigger" class="float-right"
                                            aria-label="Example icon-button with a menu"
                                            (mousedown)="mousedownEvent('',i,'','httpMethod')">
                                            <mat-icon style="margin-left: 60%">more_vert</mat-icon>
                                        </button>
                                    </div>
                                    <mat-error style="font-size: 12px;margin: 2%;"
                                        *ngIf="header.get('value').errors?.valueRequired">{{'Value is required' |
                                        translate}}
                                    </mat-error>
                                </ng-container>
                            </div>
                            <div fxLayout="row" fxLayoutGap="10px">
                                <button mat-mini-fab class="icon" type="button" color="primary" id="btnAdd"
                                    (click)="addCustomHeadersArray('webServiceRequestPayload')">
                                    <mat-icon>add</mat-icon>
                                </button>
                                <button mat-mini-fab class="icon" type="button" color="accent" id="remove"
                                    (click)="removeCustomHeaders(i,'webServiceRequestPayload')"
                                    *ngIf="getCustomHeadersFormArray('webServiceRequestPayload').length>1">
                                    <mat-icon>remove</mat-icon>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
        <div style="margin-top: 2%;">
            <mat-label style="font-weight: 500; ">{{'Response-Success Payload' | translate}}</mat-label>
            <mat-form-field style="width: 100%;">
                <mat-label>{{'JSON Payload' | translate}}</mat-label>
                <textarea matInput id="jsonSuccessText" [placeholder]="jsonPlaceHolder" style="height: 100px;"
                    formControlName="jsonSuccessText" (focusout)="getJsonSuccessText()"></textarea>
                <mat-error *ngIf="taskPropertyForm.get('jsonSuccessText').errors?.validationError">{{'Invalid json' |
                    translate}}
                </mat-error>
            </mat-form-field>

            <mat-label style="font-weight: 500;">{{'Response-Error Payload' | translate}}</mat-label>
            <mat-form-field style="width: 100%;">
                <mat-label>{{'JSON Payload' | translate}}</mat-label>
                <textarea matInput id="jsonErrorText" [placeholder]="jsonPlaceHolder" style="height: 100px;"
                    formControlName="jsonErrorText" (focusout)="getJsonErrorText()"></textarea>
                <mat-error *ngIf="taskPropertyForm.get('jsonErrorText').errors?.validationError">{{'Invalid json' |
                    translate}}
                </mat-error>
            </mat-form-field>
        </div>

    </ng-container>
    <ng-container *ngIf="taskType === 'CALL_ANOTHER_WORKFLOW'">
        <div fxLayout="row" fxLayoutGap="10px" style="padding-top: 2%;">
            <mat-form-field>
                <input matInput id="name" placeholder="{{'Name' | translate}}" formControlName="name" required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 50%;">
                <mat-label>{{'Select Workflow' | translate}} *</mat-label>
                <mat-select id="workflowName" formControlName="workflowName">
                    <mat-option *ngFor="let workflow of workflowList" [value]="workflow.processDefinitionName"
                        (onSelectionChange)="webServiceCall($event,workflow)">
                        {{workflow.processDefinitionName}}
                    </mat-option>
                </mat-select>
                <mat-error>{{'Workflow is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 50%;">
                <input matInput id="alias" placeholder="{{'Alias Name' | translate}}" formControlName="alias" required>
                <mat-error>{{'Alias Name is required' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <ng-container *ngIf="enableWebServiceForCallAnotherWorkflow">
            <mat-card-title style="padding-top: 2%;">{{'Enter Web Service Values' | translate}}</mat-card-title>
            <table>
                <tr>
                    <th>
                        <mat-label style="font-weight: 500;">{{'Variable Name' | translate}}</mat-label>
                    </th>
                    <th>
                        <mat-label style="font-weight: 500;">{{'Give Values' | translate}}</mat-label>
                    </th>
                </tr>
                <ng-container>
                    <ng-container formArrayName="callAnotherWorkflowFields"
                        *ngFor="let rule of getWebServiceFieldValuesFormarray().controls; let i = index"
                        style="margin-bottom: 2%;">
                        <ng-container [formGroupName]="i">
                            <tr>
                                <td>
                                    <input matInput id="fieldName" placeholder="{{'Enter Value' | translate}}"
                                        type="text" formControlName="fieldName">
                                </td>
                                <td>
                                    <div fxLayout="row">
                                        <input matInput id="fieldValue" formControlName="fieldValue" readonly
                                            class="border-css" placeholder="{{'Value' | translate}}">
                                        <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                            #menuTrigger5="matMenuTrigger" class="float-right"
                                            aria-label="Example icon-button with a menu"
                                            (mousedown)="mousedownEvent('',i,'','callAnotherWorkflowFields')">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                    </div>

                                </td>
                            </tr>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </table>
        </ng-container>
    </ng-container>
    <ng-container *ngIf="taskType === 'DECISION_TABLE'">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field>
                <input matInput id="name" placeholder="{{'Name' | translate}}" formControlName="name" required>
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <div fxLayout="column" fxLayoutGap="15px">
                <mat-radio-group id="operator" style="padding-top: 6%;" aria-label="Select an option"
                    formControlName="operator">
                    <mat-radio-button value="runAllConditions">{{'Run All Conditions' | translate}}</mat-radio-button>
                    <mat-radio-button value="breakWhenMatch" style="margin-left: 10px;">{{'Break When Match' |
                        translate}}
                    </mat-radio-button>
                </mat-radio-group>
                <mat-error style="font-size: 12px;margin: 1%;"
                    *ngIf="taskPropertyForm.get('operator').errors?.required && userForm.submitted">{{'Operator is
                    required' | translate}}</mat-error>
            </div>
        </div>
        <div fxLayout="row">
            <table style="width: 80%;">
                <tr>
                    <th [attr.colspan]="getConditionalsFormarray().length">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <mat-label style="font-weight: 500;">{{'Conditions' | translate}}</mat-label>
                            <button mat-raised-button type="button" color="primary" id="addNewCondition"
                                [disabled]="conditionsList.length !== getConditionalsFormarray().length"
                                class="addbutton" (click)="addNewCondition()">{{'Add New Condition' |
                                translate}}</button>
                        </div>
                    </th>
                </tr>
                <tr>
                    <ng-container formArrayName="conditions"
                        *ngFor="let rule of getConditionalsFormarray().controls; let i = index;">
                        <ng-container [formGroupName]="i">
                            <th style="width: 120px;">
                                <div fxLayout="row">
                                    <input matInput id="name" placeholder="{{'Condition' | translate}}"
                                        formControlName="name" [value]="getValue(rule.get('name').value)"
                                        class="border-css" readonly>
                                    <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                        #menuTrigger5="matMenuTrigger" class="float-right"
                                        aria-label="Example icon-button with a menu"
                                        (mousedown)="mousedownEvent('',i,'','conditionVariable')">
                                        <mat-icon>more_vert</mat-icon>
                                    </button>
                                    <mat-icon [matTooltip]="rule.get('operator').value" [id]=" i + 'operator'"
                                        [matMenuTriggerFor]="decisionConditionMatMenu" #menuTrigger10="matMenuTrigger"
                                        class="float-right" aria-label="Example icon-button with a menu"
                                        (mousedown)="mousedownDecisionEvent(i,rule.get('dataType').value)"
                                        style="padding-top: 5%; cursor: pointer;"> filter_list
                                    </mat-icon>
                                    <mat-icon [id]=" i + 'delete'" (click)="deleteColumn(rule.get('name').value, i)"
                                        style="padding-top: 5%;">delete
                                    </mat-icon>
                                </div>
                                <mat-error style="font-size: 12px;margin: 2%;"
                                    *ngIf="rule.get('name').errors?.required && userForm.submitted">
                                    {{'Condition Name is required' | translate}}</mat-error>
                            </th>
                        </ng-container>
                    </ng-container>
                </tr>
                <ng-container *ngIf="enableAddVariables">
                    <ng-container formArrayName="conditionVariableList"
                        *ngFor="let variable of taskPropertyForm['controls'].conditionVariableList['controls']; let i = index;">
                        <ng-container [formGroupName]="i">
                            <tr>
                                <ng-container formArrayName="values"
                                    *ngFor="let valueGroup of variable['controls'].values['controls']; let iw = index">
                                    <td>
                                        <ng-container [formGroupName]="iw">
                                            <div fxLayout="row" fxLayoutGap="10px">
                                                <ng-container
                                                    *ngIf="valueGroup.get('variableType').value ==='pagefield'">
                                                    <input matInput placeholder="{{'Variable' | translate}}"
                                                        [id]="'fieldName_'+i" readonly class="border-css"
                                                        style="width: 90%;"
                                                        [value]="getValue(valueGroup.get('value').value)"
                                                        formControlName="value">
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="valueGroup.get('variableType').value ==='constant'">
                                                    <input matInput placeholder="{{'Variable' | translate}}"
                                                        [id]="'fieldName_'+i" readonly class="border-css"
                                                        style="width: 90%;" formControlName="value">
                                                </ng-container>
                                                <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                                    aria-label="Example icon-button with a menu"
                                                    (click)="setConstant(valueGroup)"
                                                    (mousedown)="mousedownEvent(valueGroup,i,iw,'conditionVariableList')">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                            </div>
                                            <div fxLayout="row" fxLayoutGap="10px">
                                            </div>
                                        </ng-container>
                                    </td>
                                </ng-container>
                                <ng-container>
                                </ng-container>
                            </tr>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </table>
            <table style="width: 40%;">
                <tr style="height: 40px;">
                    <th>
                        <mat-label style="font-weight: 500;">{{'Assign To Variable' | translate}}</mat-label>
                    </th>
                </tr>
                <tr style="height: 35px;">
                    <th>
                        <div fxLayout="row" formGroupName="assignToVariable">
                            <input placeholder="{{'Variable' | translate}}" id="assignToVariable" matInput
                                formControlName="name" readonly class="border-css">
                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                #menuTrigger5="matMenuTrigger" class="float-right"
                                aria-label="Example icon-button with a menu"
                                (mousedown)="mousedownEvent('','','','assignedToVariable')">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                        </div>
                        <mat-error style="font-size: 12px;margin: 2%;"
                            *ngIf="taskPropertyForm.get('assignToVariable').errors?.required && userForm.submitted">
                            {{'Assign To Variable is required' | translate}}</mat-error>
                    </th>
                </tr>
                <ng-container *ngIf="enableAddVariables">
                    <ng-container formArrayName="assignToVariableValuesList"
                        *ngFor="let variable of taskPropertyForm['controls'].assignToVariableValuesList['controls']; let i = index;">
                        <ng-container [formGroupName]="i">
                            <tr>
                                <ng-container formArrayName="values"
                                    *ngFor="let valueGroup of variable['controls'].values['controls']; let iw = index">
                                    <td>
                                        <ng-container [formGroupName]="iw">
                                            <div fxLayout="row" fxLayoutGap="10px">
                                                <ng-container
                                                    *ngIf="valueGroup.get('variableType').value ==='pagefield'">
                                                    <input matInput placeholder="{{'Variable' | translate}}"
                                                        [id]="'fieldName_'+i" readonly class="border-css"
                                                        style="width: 90%;"
                                                        [value]="getValue(valueGroup.get('value').value)"
                                                        formControlName="value">
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="valueGroup.get('variableType').value ==='constant'">
                                                    <input matInput placeholder="{{'Variable' | translate}}"
                                                        [id]="'fieldName_'+i" readonly class="border-css"
                                                        style="width: 90%;" formControlName="value">
                                                </ng-container>
                                                <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                                    #menuTrigger5="matMenuTrigger" class="float-right"
                                                    aria-label="Example icon-button with a menu"
                                                    (click)="setConstant(valueGroup)"
                                                    (mousedown)="mousedownEvent(valueGroup,i,iw,'assignToVariableValuesList')">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                    </td>
                                </ng-container>
                                <ng-container>
                                    <div style="margin-left: 5%;" fxLayout="row" fxLayoutGap="10px">
                                        <button mat-mini-fab id="btnAdd" class="icon" type="button" color="primary"
                                            class="add" style="margin-top: 15px;" (click)="addVariableToArray()">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                        <button mat-mini-fab id="remove" class="icon" type="button" class="add"
                                            style="margin-top: 15px;" (click)="removeVariable(i)"
                                            [disabled]="getConditionalValuesFormarray().length === 0">
                                            <mat-icon>remove</mat-icon>
                                        </button>
                                    </div>
                                </ng-container>
                            </tr>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </table>
        </div>
    </ng-container>
    <ng-container *ngIf="taskType === 'SMS_TASK'">
        <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
            <mat-form-field style="width: 25%;">
                <input matInput id="name" placeholder="{{'Name' | translate}} *" formControlName="name">
                <mat-error>{{'Name is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 25%;">
                <mat-label>{{'Provider Name' | translate}} *</mat-label>
                <mat-select id="providerName" formControlName="providerName">
                    <mat-option [value]="value.id" *ngFor="let value of SMSProviderNameList">
                        {{value.providerName}}</mat-option>
                </mat-select>
                <mat-error>{{'Provider Name is required' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div formArrayName="mobileNumbersList" *ngFor="let rule of getMobileNumbersFormarray().controls; let i = index">
            <div [formGroupName]="i" fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
                <mat-form-field>
                    <mat-label>{{'Country Code' | translate}} *</mat-label>
                    <mat-select id="countryCode" formControlName="countryCode">
                        <mat-option value="+91">India(+91)</mat-option>
                        <mat-option value="+1">US(+1)</mat-option>
                    </mat-select>
                    <mat-error>{{'Country Code is required' | translate}}</mat-error>
                </mat-form-field>
                <div fxLayout="column">

                    <ng-container>
                        <mat-form-field>
                            <mat-label>{{'Mobile Number' | translate}} *</mat-label>
                            <input matInput id="mobileNumber" type="text" formControlName="mobileNumber" readonly>
                            <button mat-icon-button [matMenuTriggerFor]="menu5" type="button" style="margin-top: -21%;"
                                #menuTrigger5="matMenuTrigger" class="float-right"
                                aria-label="Example icon-button with a menu"
                                (mousedown)="mousedownEvent('',i,'','smsTaskMobileNumber')">
                                <mat-icon style="margin-top: 40%;">more_vert</mat-icon>
                            </button>

                            <mat-error *ngIf="rule.get('mobileNumber').errors?.required">
                                {{'Mobile Number is required' | translate}}</mat-error>
                        </mat-form-field>
                    </ng-container>


                </div>
                <div fxLayout="column">
                    <button mat-mini-fab class="icon" type="button" color="primary" id="btnAdd"
                        (click)="addMobileNumbersArray()" style="margin-top: 15px;"
                        [disabled]="rule.get('mobileNumber').value ===''">
                        <mat-icon>add</mat-icon>
                    </button>
                </div>
                <div fxLayout="column">
                    <button mat-mini-fab class="icon" type="button" color="accent" id="remove"
                        (click)="removeMobileNumbersArray(i)" style="margin-top: 15px;">
                        <mat-icon>remove</mat-icon>
                    </button>
                </div>
            </div>
        </div>
        <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 3%;">
            <mat-label>{{'Type your message here *' | translate}}</mat-label>
            <!-- <textarea id="mesageBody" (click)="openAutocomplete($event)" [matAutocomplete]="smsAutocomplete"
                name="mesageBody" formControlName="mesageBody" placeholder="Type ${ to search..." rows="5">

                </textarea> -->
            <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 1%;">
                <app-quill-editor [inputSms]="smsData" [fromSmsTask]="true" [fromEmailTask]="false" [smsObject]="this"
                    (smsValue)="getValueSms($event,userForm)" [systemEmailVariables]="data">
                </app-quill-editor>
            </div>
            <mat-error *ngIf="taskPropertyForm.get('mesageBody').errors?.required && userForm.submitted">SMS
                {{'Template is required' | translate}}
            </mat-error>
            <mat-autocomplete #smsAutocomplete="matAutocomplete">
                <mat-option (onSelectionChange)="removeList($event)"
                    [value]="taskPropertyForm.get('mesageBody').value + value.fieldId + '}'"
                    *ngFor="let value of autocompleteInitialFieldList;">
                    {{value.fieldName}}</mat-option>
            </mat-autocomplete>
        </div>

    </ng-container>
    <ng-container *ngIf="taskType === 'EXCEL_REPORT'">
        <div fxLayout="row" class="border-style-css" fxLayoutGap="5px" id="titlerow">
            <div fxLayout="column" style="width:10%">
                <div fxLayout="row">
                    <mat-icon
                        style="color:#000; padding-top:20px;padding-left:5px;margin-right:5px;margin-bottom: 0px;font-size: 20px;">
                        apps</mat-icon>
                    <h3 style="color:#000; padding-top:17px;margin-bottom: 0px;font-weight: bolder;"> {{'Excel' |
                        translate}}</h3>
                </div>
            </div>
            <div fxLayout="column" style="width:30%;padding-top:15px">
                <mat-form-field appearance="outline">
                    <mat-label>{{'Name' | translate}} *</mat-label>
                    <input matInput id="name" formControlName="name">
                    <mat-error>{{'Name is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="column" style="width:20%;padding-top:15px">
                <mat-form-field appearance="outline">
                    <mat-label>{{'Type' | translate}} *</mat-label>
                    <mat-select id="type" formControlName="type">
                        <mat-option value="internal">{{'Internal' | translate}}</mat-option>
                    </mat-select>
                    <mat-error>{{'Type is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="column" style="width:25%;padding-top:15px">
                <mat-form-field appearance="outline">
                    <mat-label>{{'Generated Excel Name' | translate}} *</mat-label>
                    <input matInput #subjectPosition id="excelName" [matAutocomplete]="excelAutocomplete"
                        (click)="openAutocomplete(subjectPosition)" formControlName="generatedExcelName"
                        (keyup)="openAutocomplete(subjectPosition)">

                    <mat-autocomplete #excelAutocomplete="matAutocomplete">
                        <mat-option (onSelectionChange)="removeList($event)"
                            [value]="addValueForTextAreaAutoComplete(taskPropertyForm.get('generatedExcelName').value, value.fieldId)"
                            *ngFor="let value of autocompleteInitialFieldList;">
                            {{value.fieldName}}</mat-option>
                    </mat-autocomplete>
                    <mat-error>{{'Generated Excel Name is required' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="column" style="width:15%;padding-left:5px">
                <mat-slide-toggle id="restartable" style=" padding-top:19px;margin-bottom: 0px;"
                    formControlName="restartable">{{'Restartable' | translate}}</mat-slide-toggle>
            </div>
        </div>
        <div fxLayout="row" style="margin-top: 2px; max-height: 300px; width:100%; overflow-y: auto; overflow-x: auto;">
            <table>
                <ng-container formArrayName="excelColumns">
                    <tr *ngFor="let rows of getExcelColumnsFormarray().controls; let i = index">
                        <ng-container [formGroupName]="i">
                            <td *ngIf="i !== 0" style="width: 80px;background-color:#e3eaf1;">
                                <div fxLayout="row" fxLayoutAlign="space-between center">
                                    <p style="padding-top: 12px;">R{{i}}</p>
                                    <span matTooltip="Add Row" (click)="addExcelColumnsFormGroup(i)" class="btn"
                                        style="line-height: 10px;background-color:whitesmoke;padding:5px;color:#000;cursor: pointer;border:1px solid gray">&#43;</span>
                                    <span class="btn"
                                        style="background-color:whitesmoke;padding:5px;line-height: 10px;color:#000;cursor: pointer;font-size:16px;border:1px solid gray"
                                        matTooltip="Delete Row" (click)="deleteExcelColumnsFormGroup(i)">&minus;</span>
                                </div>
                            </td>
                            <td *ngIf="i === 0" style="width: 70px;">
                            </td>
                            <td *ngIf="i === 0" style="width: 120px;">
                            </td>
                            <td *ngIf="i != 0" style="width: 120px;">
                                <!-- <mat-label>Type</mat-label> -->
                                <mat-select aria-placeholder="Type" [id]="i + 'rowType'" formControlName="rowType">

                                    <mat-option value="header">
                                        {{'Header' | translate}}
                                    </mat-option>
                                    <mat-option value="values">
                                        {{'Values' | translate}}
                                    </mat-option>
                                    <mat-optgroup *ngFor="let field of initialFieldListForExcel"
                                        style="font-weight: bold;" [label]="field.fieldType"
                                        [disabled]="field.disabled">
                                        <ng-container *ngFor="let value of field.fieldVO">
                                            <mat-option [matTooltip]="value.fieldName" [value]="value.fieldId"
                                                *ngIf="value.datatype === 'array'">
                                                {{value.fieldName}}</mat-option>
                                        </ng-container>
                                    </mat-optgroup>
                                    <mat-option value="emptyRow">
                                        {{'Empty Row' | translate}}
                                    </mat-option>
                                </mat-select>
                            </td>

                            <ng-container formArrayName="excelDetails"
                                *ngFor="let excel of rows['controls'].excelDetails['controls']; let iw = index">
                                <ng-container [formGroupName]="iw">
                                    <td *ngIf="i === 0" style="width: 120px;background-color:#e3eaf1;">
                                        <div fxLayout="row" fxLayoutAlign="space-between center">
                                            <p style="padding-top: 12px;">C{{iw + 1}}</p>
                                            <div>
                                                <span class="btn"
                                                    style="background-color:whitesmoke;border:1px solid gray;margin-right:3px;padding:5px;line-height: 10px;color:#000;cursor: pointer;font-size:16px"
                                                    matTooltip="{{'Add Column' | translate}}"
                                                    (click)="addExcelHeaderDetailsFormGroup(iw)">&#43;</span>
                                                <span class="btn"
                                                    style="background-color:whitesmoke;border:1px solid gray;padding:5px;line-height: 10px;color:#000;cursor: pointer;font-size:16px"
                                                    matTooltip="{{'Delete Column' | translate}}"
                                                    (click)="deleteExcelHeaderDetailsFormGroup(iw)"
                                                    id="delete">&#8722;</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td *ngIf="i != 0" style="width: 120px;">
                                        <ng-container *ngIf="rows.get('rowType').value !== 'emptyRow'">
                                            <div fxLayout="row" fxLayoutAlign="space-between center">
                                                <input matInput id="iw + 'value'" placeholder="{{'Value' | translate}}"
                                                    formControlName="value">
                                                <button mat-icon-button [matMenuTriggerFor]="menu5" type="button"
                                                    style="margin-top: -21%;" #menuTrigger5="matMenuTrigger"
                                                    class="float-right" aria-label="Example icon-button with a menu"
                                                    (mousedown)="mousedownEvent('',iw,i,'excelReportValue')">
                                                    <mat-icon style="margin-top: 40%;">more_vert</mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                    </td>
                                </ng-container>
                            </ng-container>
                        </ng-container>

                    </tr>
                </ng-container>

            </table>
        </div>
        <!-- <div formArrayName="excelDetails"
                *ngFor="let excel of getExcelDetailsFormarray().controls; let i = index">
                <div [formGroupName]="i">
                    <mat-card style="margin-bottom:  5px;">
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end center">
                        <div style="padding-top: 3px;">
                            <mat-slide-toggle color="accent" formControlName="hasArrayFields">
                                Is Array Field
                            </mat-slide-toggle>
                        </div>
                        <div fxLayout="column">
                            <button mat-mini-fab id="i + 'add'" class="icon" type="button" color="primary"
                                    (click)="addExcelReportFormGroup()" class="add"
                                    
                                    [disabled]="excel.get('headerName').value === ''">
                                    <mat-icon>add</mat-icon>
                                </button>
                            </div>
                            <div fxLayout="column">
                                <button mat-mini-fab class="icon" type="button" id="i + 'remove'"
                                    (click)="removeExcelReportarray(i)" class="add"
                                    >
                                    <mat-icon>remove</mat-icon>
                                </button>
                            </div>
                        </div>
                    <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 2%;">
                        <mat-form-field style="width: 30%;">
                            <input matInput id="i + 'headerName'" placeholder="Header Name *" formControlName="headerName">
                            <mat-error>Header Name is required</mat-error>
                        </mat-form-field>
                        <ng-container *ngIf="excel.get('hasArrayFields').value === true">
                            <mat-form-field style="width: 24%;">
                                <mat-label>Array Field Name</mat-label>
                                <mat-select id="arrayFieldId" formControlName="arrayFieldId">
                                            <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;" [label]="field.fieldType"
                                        [disabled]="field.disabled">
                                        <ng-container *ngFor="let value of field.fieldVO">
                                        <mat-option [value]="value.fieldId"
                                        *ngIf="value.datatype === 'array'">
                                            {{value.fieldName}}</mat-option>
                                        </ng-container>
                                        </mat-optgroup>
                                </mat-select>
                            </mat-form-field>
                        
                        <mat-form-field style="width: 26%;">
                            <mat-label>Field Name</mat-label>
                            <mat-select id="headerId" formControlName="headerId">
                                        <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;" [label]="field.fieldType"
                                    [disabled]="field.disabled">
                                    <ng-container *ngFor="let value of field.fieldVO">
                                    <mat-option [value]="value.fieldId" (onSelectionChange)="setExcelHeaderNames(excel.get('headerName'), value, $event)"
                                    *ngIf="value.repeatableFieldId === excel.get('arrayFieldId').value">
                                        {{value.fieldName}}</mat-option>
                                    </ng-container>
                                    </mat-optgroup>
                            </mat-select>
                        </mat-form-field>
                    </ng-container>
                    <div fxLayout="column" style="width: 24%;" *ngIf="excel.get('hasArrayFields').value === false">
                    <ng-container *ngIf="excel.get('variableType').value === 'constants'">
                        <mat-form-field style="width: 100%;">
                            <input matInput id="i + 'value'" placeholder="Value"
                                formControlName="value">
                            <mat-error>
                                Fields is required</mat-error>
                        </mat-form-field>
                    </ng-container>
                    <ng-container
                        *ngIf="excel.get('variableType').value === 'pageFields'">
                        <mat-form-field style="width: 100%;">
                            <mat-label>Value</mat-label>
                            <mat-select id="i + 'pagefieldValue'" formControlName="value">
                                <mat-optgroup *ngFor="let field of initialFieldList" style="font-weight: bold;" [label]="field.fieldType"
                        [disabled]="field.disabled">
                        <mat-option [value]="value.fieldId"
                        *ngFor="let value of field.fieldVO">
                            {{value.fieldName}}</mat-option>
                        </mat-optgroup>
                            </mat-select>
                            <mat-error>
                                Filter Value is required</mat-error>
                        </mat-form-field>
                    </ng-container>
                </div>
                <div fxLayout="column" *ngIf="excel.get('hasArrayFields').value === false">
                <div fxLayout="row" style="padding-top: 17px;">
                    <mat-radio-group id="i + 'variableType'"
                        aria-label="Select an option" formControlName="variableType"
                        style="width: 45%;">
                        <div fxLayout="row" fxLayoutGap="10px">
                            <mat-radio-button value="pageFields">Page
                                Field
                            </mat-radio-button>
                            <mat-radio-button value="constants">
                                Constant
                            </mat-radio-button>
                        </div>
                    </mat-radio-group>
                </div>
            </div>
            <mat-form-field style="width: 15%;">
                <input matInput type="number" min="1" oninput="this.value = Math.abs(this.value)" id="i + 'headerWidth'" placeholder="Header Width(in px) *" formControlName="headerWidth">
                <mat-error>Header Width is required</mat-error>
            </mat-form-field>
                
            </div>
        </mat-card>
            </div>
            </div> -->
    </ng-container>
    <ng-container *ngIf="taskType === 'COUNTER_TASK'">
        <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
            <mat-form-field style="width: 30%;">
                <input matInput id="name" placeholder="{{'Name of the Counter' | translate}} *" formControlName="name">
                <mat-error>{{'Counter Name is required' | translate}}</mat-error>
            </mat-form-field>
            <!-- <mat-form-field style="width: 30%;">
                    <input matInput id="counterLabel" placeholder="Assign To" formControlName="counterLabel">
                    <mat-error>Assign To is required</mat-error>
                </mat-form-field> -->
        </div>
        <div fxLayout="row" fxLayoutGap="10px" style="margin-top: 1%;">
            <mat-form-field style="width: 15%;">
                <mat-label>{{'Counter Type' | translate}} *</mat-label>
                <mat-select id="counterType" formControlName="counterType">
                    <mat-option value="global">{{'Global' | translate}}</mat-option>
                    <mat-option value="daily">{{'Daily' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'Counter Type is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 15%;">
                <input matInput id="countStartAt" type="number" oninput="this.value = Math.abs(this.value)"
                    placeholder="{{'Counter Starts At' | translate}} *" formControlName="countStartAt">
                <mat-error>{{'Counter Starts At is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 15%;">
                <input matInput id="countIncreasedBy" type="number" min="1" oninput="this.value = Math.abs(this.value)"
                    placeholder="{{'Increases counter By' | translate}} *" formControlName="countIncreasedBy">
                <mat-error>{{'Increases counter By is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width: 15%;">
                <input matInput id="resetAt" type="number" min="1" oninput="this.value = Math.abs(this.value)"
                    placeholder="{{'Counter Resets At' | translate}}" formControlName="resetAt">
            </mat-form-field>
            <mat-form-field style="width:33%">
                <mat-label id="timeZone">
                    {{'Time Zone *' | translate}}
                </mat-label>
                <mat-select formControlName="timeZone" id="timeZone">
                    <mat-option value="America/New_York" id="est">{{'Eastern Standard Time' | translate}}</mat-option>
                    <mat-option value="America/Costa_Rica" id="cst">{{'Central Standard Time' | translate}}</mat-option>
                    <mat-option value="America/Los_Angeles" id="pst">{{'Pacific Standard Time' | translate}}
                    </mat-option>
                    <mat-option value="America/Anchorage" id="akst">{{'Alaska Standard Time' | translate}}</mat-option>
                </mat-select>
                <mat-error>
                    {{'Time Zone is required' | translate}}
                </mat-error>
            </mat-form-field>
        </div>
    </ng-container>
    <ng-container *ngIf="taskType === 'SYSTEM_TASK'">
        <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field>
                <mat-label>{{'Assignee User' | translate}}</mat-label>
                <mat-select id="systemtask_assigneeUser" formControlName="assigneeUser">
                    <mat-option value=""></mat-option>
                    <mat-option *ngFor="let user of userList" [id]="user.userName" [value]="user.userId">
                        {{user.userName}}
                    </mat-option>
                </mat-select>
                <mat-error>{{'Assignee User is required' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{'Team' | translate}}</mat-label>
                <mat-select id="systemtask_assigneeUser" formControlName="assigneeGroup" multiple>
                    <mat-option *ngFor="let group of groupList" [id]="group.groupName" [value]="group.groupId">
                        {{group.groupName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 3%;">
            <mat-label>{{'Type your notification message here' | translate}} *</mat-label>
            <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 1%;">
                <app-quill-editor [inputSystemData]="systemData" [fromSystemTask]="true" [fromEmailTask]="false"
                    [systemObject]="this" (systemValue)="getSystemTemplate($event,userForm)"
                    [systemEmailVariables]="data">
                </app-quill-editor>
            </div>
            <!-- <textarea id="mesageBody" (click)="openAutocomplete($event)" [matAutocomplete]="systemAutocomplete"
                name="mesageBody" formControlName="mesageBody" placeholder="Type ${ to search..." rows="5">

                    </textarea> -->
            <mat-error *ngIf="taskPropertyForm.get('mesageBody').errors?.required && userForm.submitted">{{'Notification
                message is required' | translate}}
            </mat-error>
            <mat-autocomplete #systemAutocomplete="matAutocomplete">
                <mat-option (onSelectionChange)="removeList($event)"
                    [value]="taskPropertyForm.get('mesageBody').value + value.fieldId + '}'"
                    *ngFor="let value of autocompleteInitialFieldList;">
                    {{value.fieldName}}</mat-option>
            </mat-autocomplete>
        </div>
    </ng-container>
    <div style="margin-top: 1%;" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end end">
        <mat-error *ngIf="taskPropertyForm.errors && taskPropertyForm.errors?.validation">{{'Select Assignee User or
            Team' | translate}}</mat-error>
    </div>
    <ng-container *ngIf="taskType === 'EMAIL_TASK'">
        <div style="margin-top: 1%;" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end end">
            <mat-error *ngIf="(taskPropertyForm.get('emailTemplate').errors?.repeated || taskPropertyForm.get('subject').errors?.repeated)
             && userForm.submitted">{{'Add repeatable fields to either Template or Subject' | translate}}
            </mat-error>
        </div>
    </ng-container>
    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end end" style="margin-top: 1%;">
        <button mat-raised-button type="submit" id="btnSave" color="primary"
            [disabled]="!taskPropertyForm.dirty">{{'Save' | translate}}</button>
        <button mat-raised-button color="accent" id="cancel" type="button" (click)="cancel()">{{'Cancel' |
            translate}}</button>
        <button mat-raised-button color="primary" id="reset" type="button" (click)="reset(userForm)">{{'Reset' |
            translate}}</button>
    </div>
    <mat-menu #menu1="matMenu" class="column-menu">

        <div fxLayout="row" (click)="$event.stopPropagation()">
            <p class="pl-3 text-dark font-weight-bold mb-2">
                {{'Page Field' | translate}}</p>
            <hr class="hr_style_pagefield">
        </div>
        <button mat-menu-item class="px-0" (click)="setPageFieldValue('')" type="button">
            <span fxLayoutAlign="end" style="margin-right: 10px;">({{'empty' | translate}})</span>
        </button>
        <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class=" col-md-12 mx-0 w-100" *ngFor="let field of fieldList" style="margin-top:10px;">
                <p class="text-dark font-weight-bold mb-2">{{field.fieldType}}</p>
                <div *ngFor="let value of field.fieldVO">
                    <button mat-menu-item class="px-0" (click)="setPageFieldValue(value.fieldId)" type="button">
                        <mat-icon class="mr-1 f_20 pt-1" [style.color]="value.color">{{getIcon(value)}}</mat-icon>
                        <span>{{value.fieldName}}</span>
                    </button>
                </div>
            </div>
        </div>
    </mat-menu>
    <mat-menu #menu2="matMenu" class="column-menu">
        <div fxLayout="row" (click)="$event.stopPropagation()">
            <p class="pl-3 text-dark font-weight-bold mb-2">
                {{'Page Field' | translate}}</p>
            <hr class="hr_style_pagefield">
        </div>
        <button mat-menu-item class="px-0" (click)="setRepeatableFieldValue('')" type="button"></button>
        <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class=" col-md-12 mx-0 w-100" *ngFor="let field of initialFieldList" style="margin-top:10px;">
                <p class="text-dark font-weight-bold mb-2">{{field.fieldType}}</p>
                <div *ngFor="let value of field.fieldVO">
                    <button *ngIf="value.datatype === 'array' || value.controlType ==='shoppingcart'" mat-menu-item
                        class="px-0" (click)="setRepeatableFieldValue(value.fieldId)" type="button">
                        <mat-icon class="mr-1 f_20 pt-1" [style.color]="value.color">{{getIcon(value)}}</mat-icon>
                        <span>{{value.fieldName}}</span>
                    </button>
                </div>
            </div>
        </div>
    </mat-menu>
    <mat-menu #menu3="matMenu" class="column-menu">
        <!-- <div class="row mx-0  w-100" (click)="$event.stopPropagation()"
            *ngIf="selectedField && selectedField.datatype !== 'array'">
            <div class="col-md-6 pr-1">
                <p class="text-dark font-weight-bold mb-2">Constant</p>
            </div>
            <div class="col-md-12 pl-2 pr-1">
                <div fxLayout="row" id="search">
                    <div class="input-group mb-3 px-2">
                        <ng-container *ngIf="selectedField && selectedField.datatype!=='date'">
                            <input [type]="getFieldType()" formControlName="constantValue" class="form-control"
                                placeholder="Variable value">
                        </ng-container>
                        <ng-container *ngIf="selectedField && selectedField.datatype==='date'">
                            <input matInput [matDatepicker]="picker" formControlName="constantValue"
                                class="form-control" placeholder="Variable value">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </ng-container>
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <mat-icon matSuffix style="cursor: pointer;" (click)="setRepetableConstantValue(field)">
                                    done
                                </mat-icon>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div fxLayout="row" (click)="$event.stopPropagation()"
            *ngIf="selectedField && selectedField.datatype !== 'array'">
            <hr class="hr_style">
            <span>
                OR
            </span>
            <hr class="hr_style">
        </div> -->
        <div fxLayout="row" (click)="$event.stopPropagation()">
            <p class="pl-3 text-dark font-weight-bold mb-2">
                {{'Page Field' | translate}}</p>
            <hr class="hr_style_pagefield">
        </div>
        <button mat-menu-item class="px-0" (click)="setRepeatablePageFieldValue('')" type="button">
            <span fxLayoutAlign="end" style="margin-right: 10px;">({{'empty' | translate}})</span>
        </button>
        <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class=" col-md-12 mx-0 w-100" *ngFor="let field of fieldList" style="margin-top:10px;">
                <p class="text-dark font-weight-bold mb-2">{{field.fieldType}}</p>
                <div *ngFor="let value of field.fieldVO">
                    <button mat-menu-item class="px-0" (click)="setRepeatablePageFieldValue(value.fieldId)"
                        type="button">
                        <mat-icon class="mr-1 f_20 pt-1" [style.color]="value.color">{{getIcon(value)}}</mat-icon>
                        <span>{{value.fieldName}}</span>
                    </button>
                </div>
            </div>
        </div>
    </mat-menu>
    <mat-menu #menu4="matMenu" class="column-menu">
        <!-- <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class="col-md-6 pr-1">
                <p class="text-dark font-weight-bold mb-2">Constant</p>
            </div>
            <div class="col-md-12 pl-2 pr-1">
                <div fxLayout="row" id="search">
                    <div class="input-group mb-3 px-2">
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <mat-icon matPrefix style="cursor: pointer;" (click)="openDecisionTaskDataTypeDialog()">{{getFieldTypeIcon()}}
                                </mat-icon>
                            </span>
                        </div>
                            <input [type]="getFieldType()" formControlName="constantValue" class="form-control"
                                placeholder="Variable value">
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <mat-icon matSuffix style="cursor: pointer;">done
                                </mat-icon>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div fxLayout="row" (click)="$event.stopPropagation()">
            <hr class="hr_style">
            <span>
                OR
            </span>
            <hr class="hr_style">
        </div> -->
        <div fxLayout="row" (click)="$event.stopPropagation()">
            <p class="pl-3 text-dark font-weight-bold mb-2">
                {{'Page Field' | translate}}</p>
            <hr class="hr_style_pagefield">
        </div>
        <button mat-menu-item class="px-0" (click)="setDecisionTaskPageFieldValue('','')" type="button">
            <span fxLayoutAlign="end" style="margin-right: 10px;">({{'empty' | translate}})</span>
        </button>
        <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class=" col-md-12 mx-0 w-100" *ngFor="let field of fieldList" style="margin-top:10px;">
                <p class="text-dark font-weight-bold mb-2">{{field.fieldType}}</p>
                <div *ngFor="let value of field.fieldVO">
                    <button mat-menu-item class="px-0" (click)="setDecisionTaskPageFieldValue(value.fieldId,value)"
                        type="button">
                        <mat-icon class="mr-1 f_20 pt-1" [style.color]="value.color">{{getIcon(value)}}</mat-icon>
                        <span>{{value.fieldName}}</span>
                    </button>
                </div>
            </div>
        </div>
    </mat-menu>
    <!-- </perfect-scrollbar> -->
</form>
<form [formGroup]="constantValueForm" #userForm="ngForm">
    <mat-menu #menu5="matMenu" class="column-menu">
        <div *ngIf="decisionType === 'bearerToken' || decisionType === 'customHeaders' || 
        decisionType === 'queryParams' || decisionType === 'callAnotherWorkflowFields'  || decisionType === 'excelReportValue' ||
        decisionType === 'dbTaskInsertValue'  || decisionType === 'conditionVariableList' || decisionType === 'assignToVariableValuesList'
        || decisionType === 'assignedToVariable'">
            <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
                <div class="col-md-6 pr-1">
                    <p class="text-dark font-weight-bold mb-2">{{'Constant' | translate}}</p>
                </div>
                <div class="col-md-12 pl-2 pr-1">
                    <div fxLayout="row" id="search">
                        <div class="input-group mb-3 px-2">
                            <ng-container *ngIf="selectedField.dataType !== 'string' &&
                            selectedField.dataType !== 'date'">
                                <input formControlName="constantValue" class="form-control"
                                    placeholder="{{'Variable value' | translate}}" type="number">
                            </ng-container>
                            <ng-container *ngIf="selectedField.dataType === 'string'">
                                <input formControlName="constantValue" class="form-control"
                                    placeholder="{{'Variable value' | translate}}" type="text">
                            </ng-container>
                            <ng-container *ngIf="selectedField.dataType === 'date'">
                                <!-- <input matInput [matDatepicker]="picker" formControlName="constantValue"
                                    placeholder="Variable value" readonly class="border-css">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker> -->

                                <div class="input-group">
                                    <input class="form-control" [matDatepicker]="picker" formControlName="constantValue"
                                        placeholder="{{'Variable value' | translate}}" readonly
                                        aria-label="Recipient's username" aria-describedby="basic-addon2">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary p-0" type="button">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </button>
                                        <button class="btn btn-outline-secondary p-0" type="button">
                                            <mat-icon matSuffix style="cursor: pointer;" (click)="saveConstantValue()">
                                                done
                                            </mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </ng-container>
                            <!-- <ng-container *ngIf="selectedField === ''">
                            <input formControlName="constantValue" class="form-control" placeholder="Variable value">
                            </ng-container> -->
                            <div class="input-group-append" *ngIf="selectedField.dataType !== 'date'">
                                <span class="input-group-text">
                                    <mat-icon matSuffix style="cursor: pointer;" (click)="saveConstantValue()">done
                                    </mat-icon>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div fxLayout="row" (click)="$event.stopPropagation()">
                <hr class="hr_style">
                <span>
                    {{'OR' | translate}}
                </span>
                <hr class="hr_style">
            </div>
        </div>
        <div *ngIf="decisionType === 'computeTaskVariable' ||
        decisionType === 'dbTaskFilterValue'">
            <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
                <div class="col-md-6 pr-1">
                    <p class="text-dark font-weight-bold mb-2">{{'Constant' | translate}}</p>
                </div>
                <div class="col-md-12 pl-2 pr-1">
                    <div fxLayout="row" id="search">
                        <div class="input-group mb-3 px-2">
                            <ng-container *ngIf="selectedField !== 'string' &&
                            selectedField !== 'date'">
                                <input formControlName="constantValue" class="form-control"
                                    placeholder="{{'Variable value' | translate}}" type="number">
                            </ng-container>
                            <ng-container *ngIf="selectedField === 'string'">
                                <input formControlName="constantValue" class="form-control"
                                    placeholder="{{'Variable value' | translate}}" type="text">
                            </ng-container>
                            <ng-container *ngIf="selectedField === 'date'">
                                <!-- <input matInput [matDatepicker]="picker" formControlName="constantValue"
                                    placeholder="Variable value" readonly class="border-css">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker> -->

                                <div class="input-group">
                                    <input class="form-control" [matDatepicker]="picker" formControlName="constantValue"
                                        placeholder="{{'Variable value' | translate}}" readonly
                                        aria-label="Recipient's username" aria-describedby="basic-addon2">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary p-0" type="button">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </button>
                                        <button class="btn btn-outline-secondary p-0" type="button">
                                            <mat-icon matSuffix style="cursor: pointer;" (click)="saveConstantValue()">
                                                done
                                            </mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </ng-container>
                            <!-- <ng-container *ngIf="selectedField === ''">
                            <input formControlName="constantValue" class="form-control" placeholder="Variable value">
                            </ng-container> -->
                            <div class="input-group-append" *ngIf="selectedField !== 'date'">
                                <span class="input-group-text">
                                    <mat-icon matSuffix style="cursor: pointer;" (click)="saveConstantValue()">done
                                    </mat-icon>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div fxLayout="row" (click)="$event.stopPropagation()">
                <hr class="hr_style">
                <span>
                    {{'OR' | translate}}
                </span>
                <hr class="hr_style">
            </div>
        </div>
        <div fxLayout="row" (click)="$event.stopPropagation()">
            <p class="pl-3 text-dark font-weight-bold mb-2">
                {{'Page Field' | translate}}</p>
            <hr class="hr_style_pagefield">
        </div>
        <button mat-menu-item class="px-0" (click)="setSelectedPageFieldValue('', '')" type="button">
            <span fxLayoutAlign="end" style="margin-right: 10px;">({{'empty' | translate}})</span>
        </button>
        <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
            <div class=" col-md-12 mx-0 w-100" *ngFor="let field of fieldList" style="margin-top:10px;">
                <p class="text-dark font-weight-bold mb-2">{{field.fieldType}}</p>
                <div *ngFor="let value of field.fieldVO">
                    <button mat-menu-item class="px-0" (click)="setSelectedPageFieldValue(value.fieldId, value)"
                        type="button">
                        <mat-icon class="mr-1 f_20 pt-1" [style.color]="value.color">{{getIcon(value)}}</mat-icon>
                        <span>{{value.fieldName}}</span>
                    </button>
                </div>
            </div>
        </div>
    </mat-menu>
</form>
<mat-menu #menuMap="matMenu" class="column-menu-map">
    <button mat-menu-item class="px-1" (click)="mapAllFields()" type="button">
        <mat-icon class="mr-1 f_20 pt-1" color='primary'>compare_arrows</mat-icon>
        <span>{{'Map Automatically' | translate}}</span>
    </button>
    <button mat-menu-item class="px-1" (click)="clearMapping()" type="button">
        <mat-icon class="mr-1 f_20 pt-1" color='accent'>fact_check</mat-icon>
        <span>{{'Clear Mapping' | translate}}</span>
    </button>
</mat-menu>
<mat-menu #decisionConditionMatMenu="matMenu" class="column-menu">
    <div fxLayout="row" (click)="$event.stopPropagation()">
        <p class="pl-3 text-dark font-weight-bold mb-2">
            {{'Operator' | translate}}</p>
        <hr class="hr_style_pagefield">
    </div>
    <div class="row mx-0  w-100" (click)="$event.stopPropagation()">
        <div *ngFor="let value of dataType[decisionDataType]">
            <button mat-menu-item [style.background-color]="getDecisionColor(value.value)"
                (click)="setDecisionTableConditionPageFieldValue(value.value)" type="button">
                <span>{{value.description}}</span>
            </button>
        </div>
    </div>
</mat-menu>
<div fxLayout.xs="column" fxLayoutAlign="start none" style="margin: 1%">
  <mat-card class="card-style">

    <mat-card>
      <mat-card-title>Beneficiary</mat-card-title>
      <form [formGroup]="form" #userForm="ngForm">
        <input type="hidden" name="id" formControlName="id" />
        <div formGroupName="beneficiary">
          <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
            <mat-form-field style="width: 20%;">
              <input matInput type="text" formControlName="identifier" name="identifier" id="identifier" required
                placeholder="Identifier" readonly="{{readonly}}">
              <mat-error class="text-danger" id="identifierRequired"
                *ngIf="form.get('beneficiary').get('identifier').errors?.required
              &&(userForm.submitted || form.get('beneficiary').get('identifier').touched || form.get('beneficiary').get('identifier').dirty)">
                Identifier is required
              </mat-error>
            </mat-form-field>

            <mat-form-field style="width: 20%;">
              <input matInput type="text" formControlName="firstName" name="firstName" id="firstName" required
                placeholder="First Name">
              <mat-error class="text-danger" id="firstNameRequired"
                *ngIf="form.get('beneficiary').get('firstName').errors?.required
              &&(userForm.submitted || form.get('beneficiary').get('firstName').touched || form.get('beneficiary').get('firstName').dirty)">
                First Name is required
              </mat-error>
            </mat-form-field>

            <mat-form-field style="width: 20%;">
              <input matInput type="text" formControlName="lastName" name="lastName" id="lastName" required
                placeholder="Last Name">

              <mat-error class="text-danger" id="lastNameRequired"
                *ngIf="form.get('beneficiary').get('lastName').errors?.required
              &&(userForm.submitted || form.get('beneficiary').get('lastName').touched || form.get('beneficiary').get('lastName').dirty)">
                Last Name is required
              </mat-error>
            </mat-form-field>

            <mat-form-field style="width: 20%;">
              <input matInput [matDatepicker]="beneficiaryDob" placeholder="Date of Birth *" id="dob" [max]="today"
                name="dob" formControlName="dob">
              <mat-datepicker-toggle matSuffix [for]="beneficiaryDob"></mat-datepicker-toggle>
              <mat-datepicker #beneficiaryDob startView="month" [startAt]="beneficiaryDob">
              </mat-datepicker>
              <mat-error class="text-danger" id="beneficiaryDOBRequired"
                *ngIf="form.get('beneficiary').get('dob').errors?.required
      &&(userForm.submitted || form.get('beneficiary').get('dob').touched || form.get('beneficiary').get('dob').dirty)">
                Date of Birth is required
              </mat-error>
            </mat-form-field>

            <mat-form-field style="width: 20%;">
              <mat-label>Gender *</mat-label>
              <mat-select id="gender" name="gender" formControlName="gender">
                <mat-option id="male" value="M">Male</mat-option>
                <mat-option id="female" value="F">Female</mat-option>
              </mat-select>
              <mat-error class="text-danger" id="beneficiaryGenderRequired"
                *ngIf="form.get('beneficiary').get('gender').errors?.required
      &&(userForm.submitted || form.get('beneficiary').get('gender').touched || form.get('beneficiary').get('gender').dirty)">
                Gender is required
              </mat-error>
            </mat-form-field>



          </div>

          <div formGroupName="address">
            <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
              <mat-form-field style="width: 19%;">
                <input matInput type="text" formControlName="address" name="address" id="address" required
                  placeholder="Address">
                <mat-error class="text-danger" id="addressRequired"
                  *ngIf="form.get('beneficiary').get('address').get('address').errors?.required
                &&(userForm.submitted || form.get('beneficiary').get('address').get('address').touched || form.get('beneficiary').get('address').get('address').dirty)">
                  Address is required
                </mat-error>

              </mat-form-field>
              <mat-form-field style="width: 19%;">
                <input matInput type="text" formControlName="city" name="city" id="city" required placeholder="City">
                <mat-error class="text-danger" id="cityRequired"
                  *ngIf="form.get('beneficiary').get('address').get('city').errors?.required
                  &&(userForm.submitted || form.get('beneficiary').get('address').get('city').touched || form.get('beneficiary').get('address').get('city').dirty)">
                  City is required
                </mat-error>
              </mat-form-field>

              <mat-form-field style="width: 19%;">
                <input matInput type="text" formControlName="state" name="state" id="state" required placeholder="State"
                  maxlength="2">
                <mat-error class="text-danger" id="stateRequired"
                  *ngIf="form.get('beneficiary').get('address').get('state').errors?.required
                    &&(userForm.submitted || form.get('beneficiary').get('address').get('state').touched || form.get('beneficiary').get('address').get('state').dirty)">
                  State is required
                </mat-error>
              </mat-form-field>

              <mat-form-field style="width: 18%;">
                <input matInput type="text" formControlName="zipcode" name="zipcode" id="zipcode" required
                  placeholder="Zipcode" maxlength="9">
                <mat-error class="text-danger" id="zipcodeRequired"
                  *ngIf="form.get('beneficiary').get('address').get('zipcode').errors?.required
                    &&(userForm.submitted || form.get('beneficiary').get('address').get('zipcode').touched || form.get('beneficiary').get('address').get('zipcode').dirty)">
                  Zipcode is required
                </mat-error>
              </mat-form-field>
            </div>

          </div>

        </div>
        <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
          <mat-form-field  style="width: 19%;">
            <mat-label for="environmentList">
              Environment Name
            </mat-label>
            <mat-select [(value)]="selected" formControlName="environmentId" id="environmentList">
              <mat-option style="display:none" value="Environment Name"></mat-option>
              <mat-option id="environmentOption" [value]="environment.id" *ngFor="let environment of response">
                {{environment.environmentNames}}
              </mat-option>
            </mat-select>
            <mat-error class="text-danger" id="environmentNameRequired" *ngIf="form.get('environmentId').errors?.required
                  &&(userForm.submitted || form.get('environmentId').touched || form.get('environmentId').dirty)">
              Environment Name is required
            </mat-error>
          </mat-form-field>

          <ng-container formGroupName="beneficiary">
            <mat-form-field style="width: 59%;">
              <input matInput type="text" formControlName="description" name="description" id="description" required
                placeholder="Beneficiary Description" maxlength="150">
              <mat-error class="text-danger" id="identifierRequired"
                *ngIf="form.get('beneficiary').get('description').errors?.required
                &&(userForm.submitted || form.get('beneficiary').get('description').touched || form.get('beneficiary').get('description').dirty)">
                Beneficiary Description is required
              </mat-error>
            </mat-form-field>
          </ng-container>


        </div>
        <mat-card-actions>
          <div fxLayoutAlign="center center">
            <button mat-raised-button color="primary" id="btnsave" class="ml-3 float-center"
              (click)="save(userForm)">Save</button>
            <button mat-raised-button color="primary" type="reset" id="btnreset" name="btnrset" class="resetbutton"
              (click)="clearSearch(userForm)">Reset</button>
            <button mat-raised-button id="delete" (click)="delete(userForm)" color="accent">Delete</button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card>

  </mat-card>
</div>

<div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around center" style="margin: 1%">
  <mat-card class="card-style">
    <mat-card-title>Benficiary List</mat-card-title>
    <app-yorogrid #beneficiary gridId="beneficiary" (messageEvent)="receiveMessage($event)" defaultColumn="type">
    </app-yorogrid>
  </mat-card>
</div>